---
publish: true
tags: 
aliases: 
finished: true
title: 题7
created: "2024-11-17 18:20"
updated: "2024-11-19 13:17"
---
## 题7
### 题目
【2017 统考真题】甲乙双方均采用后退 N 帧协议 (GBN) 进行持续的双向数据传输，且双方始终采用捎带确认，帧长均为 1000 B。 $S_{x,y}$ 和 $R_{x,y}$ 分别表示甲方和乙方发送的数据帧，其中：x 是发送序号；y 是确认序号（表示希望接收对方的下一帧序号）；数据帧的发送序号和确认序号字段均为 3 比特。信道传输速率为 100 Mbps，RTT = 0.96 ms。下图给出了甲方发送数据帧和接收数据帧的两种场景，其中 $t_0$ 为初始时刻，此时甲方的发送和确认序号均为 0， $t_1$ 时刻甲方有足够多的数据待发送。
![](https://img.hwenyi.live/202411192117739.webp)
请回答下列问题。
(1) 对于图 (a)， $t_0$ 时刻到 $t_1$ 时刻期间，甲方可以断定乙方已正确接收的数据帧数是多少？正确接收的是哪几个帧（请用 $S_{x,y}$ 形式给出）？
(2) 对于图 (a)，从 $t_1$ 时刻起，甲方在不出现超时且未收到乙方新的数据帧之前，最多还可以发送多少个数据帧？其中第一个帧和最后一个帧分别是哪个（请用 $S_{x,y}$ 形式给出）？
(3) 对于图 (b)，从 $t_1$ 时刻起，甲方在不出现新的超时且未收到乙方新的数据帧之前，需要重发多少个数据帧？重发的第一个帧是哪个（请用 $S_{x,y}$ 形式给出）？
(4) 甲方可以达到的最大信道利用率是多少？
### 分析

### 解
1) ${t}_{0}$ 时刻到 ${t}_{1}$ 时刻期间,甲方可以断定乙方已正确接收 3 个数据帧,分别是 ${S}_{0,0}、{S}_{1,0}、{S}_{2,0}$ 。  ${R}_{3,3}$ 说明乙方发送的数据帧序号是 3,即希望甲方发送序号 3 的数据帧,说明乙方已经接 收序号为 0 2 的数据帧 (注意, 这个确认序号是期望接收对方的下一帧的序号)。

2) 从 ${t}_{1}$ 时刻起,甲方最多还可以发送 5 个数据帧,其中第一个帧是 ${S}_{5,2}$ ,最后一个数据帧是  ${S}_{1,2}$ 。发送序号 3 位,有 8 个序号,在 GBN 协议中,发送窗口$+ 1 \leq$ 序号总数,所以这里 发送窗口取最大值 7 。此时已发送 ${S}_{3,0}$ 和 ${S}_{4,1}$ ,所以最多还可以发送 5 个帧 (数据帧以序 号 ${01234567},{01234567},\cdots$ 的规律发送,但初始时只有 0123456 落在发送窗口内,之后随 着发送方不断收到确认, 发送窗口也不断向前滑动)。

3) 甲方需要重发 3 个数据帧,重发的第一个帧是 ${S}_{2,3}$ 。在 GBN 协议中,发送方发送 $N$ 帧后,  检测出错,则需要发送出错帧及其之后的帧。 ${S}_{2,0}$ 超时,所以重发的第一帧是 ${S}_{2}$ 。已收到乙方的 ${R}_{2}$ 帧,所以帧号应为 3 。

4) 甲方可以达到的最大信道利用率 $U$ 是
    ![](https://img.hwenyi.live/202406021524321.webp)

信道利用率 $U =$ 发送数据帧的时间/从开始发送第一个数据帧到收到第一个确认帧的时间 $=$  $N \times  {T}_{d}/\left( {{T}_{d} + {RTT} + {T}_{a}}\right)$ 。其中, $N$ 取发送窗口的最大值, ${T}_{d}$ 是发送一个数据帧的时间,RTT 是往返 时间, ${T}_{a}$ 是发送一个确认帧的时间。这里采用捎带确认, ${T}_{d} = {T}_{a}$ 。