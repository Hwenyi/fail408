---
publish: true
tags: []
aliases: 
finished: true
title: 题14
created: "2024-11-17 18:15"
updated: "2024-11-20 06:34"
---
## 题14
### 题目
【2016】假设下图中的H3方问题是一个图中的 $\mathrm{S}$ 为问题的 $\mathrm{{TCP}}$ 连接分配了 ${20}\mathrm{{KB}}\left( {\mathrm{K} = {1024}}\right)$ 的接收缓存,最大段长 MSS $= 1\mathrm{\;{KB}}$ ,平均往返时间 RTT $= {200}\mathrm{\;{ms}}$ 。 H3 建立连接时的初始序号为 100,且持续以 MSS 大小的段向S发送数据, 拥塞窗口初始阈值为32 KB; S对收到的每个段进行确认,并通告新的接收窗口。假定 TCP 连接建立完成列问题：
(1) 在 TCP 连接建立过程中, H3 收到的S发送过来的第二次握手 TCP 段的 SYN 和 ACK 标志位的值分别是多少? 确认序号是多少?
(2) H3收到的第 8 个确认段所通告的接收窗口是多少?此时H3的拥塞窗口变为多少?H3的发送窗口变为多少?H3的发送窗口变为多少? 口等于 0 时刻为止, 平均数据传输速率是多少 (忽略段的传输延平是多少 (忽略段的传输延时)?
(4) 若H3与S之间通信已经结束,在 $t$ 时刻H3请求断开该连接,则从 $t$ 时刻起, $S$ 释放该连接的最短时间是多少?
![](https://img.hwenyi.live/202411191259724.webp)
### 分析
[[刷题/408真题分类/计网真题/第 5 章传输层/题20]]
### 解
1. 第二次握手报文段的 $\mathrm {{SYN}} = 1,\mathrm {{ACK}} = 1$ 。确认序号是第一次握手报文段的序号 $+ 1 = {101}$ 。
2. 因为 $S$ 的 TCP 接收缓存仅有数据存入而无数据取出,当 $S$ 收到第 8 个段时接收缓存还剩 ${12}\;{KB}$ ,所以 $H3$ 收到的第 8 个确认段所通告的接收窗口是 ${12}\;{KB}$ 。在慢开始阶段,每收到一个对新报文段的确认, 拥塞窗口就加 1 , 当收到对第 8 个报文段的确认后, H3 的拥塞窗口变为 $9\mathrm {{KB}}$ 。H3 的发送窗口取接收窗口和拥塞窗口的最小值,即 $9\mathrm {{KB}}$ 。
3. $H3$ 的发送窗口等于 0 时,下一个待发送段的序号是 ${20}\;K + {101} = {20} \times  {1024} + {101} = {20581}$ 。 H3 从发送第 1 个段到发送窗口等于 0 时刻为止, 共耗费了 5 个 RTT (每个 RTT 传输的数据量依次为 $1\;{KB}、2\;{KB}、4\;{KB}、8\;{KB}、5\;{KB}$ ),平均数据传输速率是 ${20}\;{KB} \div  \left( {5 \times  {200}\;{ms}}\right)  =$ ${20} \times  {1024} \times  8\;b/s = {163.84}\;{kb}/s$ 。
注意
$K$ 表示文件大小或描述存储空间时等于 1024,这里通常用大写的 $K;k$ 表示传输速率或描述网络通信时等于 1000 , 这里通常用小写的 k。注意区分和转换。
4. $t$ 时刻 $H3$ 请求断开连接,发出连接释放 $\mathrm {{FIN}}$ 报文段; $S$ 收到后,最短时间的情况是 $S$ 已没有要发送的数据,所以同时发出确认 ACK 报文段和连接释放 FIN 报文段,即 $S$ 直接跳过 CLOSE-WAIT 状态; H3 收到 FIN 报文段后必须发出确认, S 收到确认后进入 CLOSED 状态,共经历 1.5 个 RTT,因此 S 释放该连接的最短时间是 ${1.5} \times  {200}\;{ms} = {300}\;{ms}$ 。