---
publish: true
tags: []
aliases: 
finished: true
title: 题7
created: "2024-11-11 11:16"
updated: "2024-12-05 11:28"
---
## 题7
### 题目
【2017】已知 $f(n)=\sum_{i=0}^n2^i=2^{n+1}-1=\overbrace{11\cdots 1}^{n+1\text{位}}{\rm B}$ ，计算 f(n) 的 C 语言函数 f1 如下：

```cpp
int f1(unsigned n) { 
    int sum=1, power=1;
    for (unsigned i=0; i<=n-1; i++) { 
        power*=2;
        sum+=power;
    }
    return sum;
}
```

将 f1 中的 int 都改为 float，可得到计算 f(n) 的另一个函数 f2。假设 unsigned 和 int 型数据都占 32 位，float 采用 IEEE754 单精度标准。请回答下列问题。

(1) 当 n=0 时，f1 会出现死循环，为什么？若将 f1 中的变量 i 和 n 都定义为 int 型，则 f1 是否还会出现死循环？为什么？

(2) f1(23) 和 f2(23) 的返回值是否相等？机器数各是什么（用十六进制表示）？

(3) f1(24) 和 f2(24) 的返回值分别为 33554431 和 33554432.0，为什么不相等？

(4) f(31)= $2^{32}-1$ ，而 f1(31) 的返回值却为 - 1，为什么？若使 f1(n) 的返回值与 f(n) 相等，则最大的 n 是多少？

(5) f2(127) 的机器数为 7F80 0000H，对应的值是什么？若使 f2(n) 的结果不溢出，则最大的 n 是多少？若使 f2(n) 的结果精确（无舍入），则最大的 n 是多少？
### 分析
[[题2.3.5]]，注意体会[[浮点数]]的[[溢出]]和IEEE754的舍入右规规则是怎么运行的
### 解
[[刷题/408历年真题解析/2017年408真题计算机组成原理篇/题43]]
