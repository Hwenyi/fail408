---
publish: true
tags: []
aliases: 
finished: true
title: 题22
created: "2024-11-20 06:42"
updated: "2024-11-23 03:52"
---
## 题22
### 题目
【2020】某校园网有两个局域网，通过路由器 R1、R2 和 R3 互联后接入 Internet，S1 和 S2 为以太网交换机。局域网采用静态 IP 地址配置，路由器部分接口以及各主机的 IP 地址如下图所示。
![](https://img.hwenyi.live/202411222235693.webp)
假设 NAT 转换表结构为：
![](https://img.hwenyi.live/202411222235694.webp)
请回答下列问题：
(1) 为使 H2 和 H3 能够访问 Web 服务器（使用默认端口号），需要进行什么配置？
(2) 若 H2 主动访问 Web 服务器时，将 HTTP 请求报文封装到 IP 数据报 P 中发送，则 H2 发送 P 的源 IP 地址和目的 IP 地址分别是什么？经过 R3 转发后，P 的源 IP 地址和目的 IP 地址分别是什么？经过 R2 转发后，P 的源 IP 地址和目的 IP 地址分别是什么？
### 分析
考察了[[NAT网络地址转换|NAT]]的转换规则，核心的想法是，我们从[[默认网关]]这里分配端口给内网的设备，把内网地址转化为外网的ip+[[端口号]]
然后就是[[路由器的基本工作原理|路由器]]转发的时候，目的地在进入另一个网络前，比如这里的就是从自己的局域网R3去到R2的时候，这个目的地应该是R2,通过R2访问服务器的时候，我们才修改为服务器的地址，[[源IP地址-ipv4]]在这个过程中是不变的
突然发现，还有一个点要注意[[NAT网络地址转换|NAT]]，这里的R2通过[[HTTP超文本传输协议|HTTP]]访问服务器，所以必须把内网的端口和外网的[[端口号]]都配置为80，而R3这个地方起一个转发的作用，在本设备上分配给H2和H3的端口只需要不同就可以了
![](https://img.hwenyi.live/202411231147575.webp)
[[刷题/25计网-王道/第 4 章 网络层/综合题/题18]]
### 解
[[刷题/408历年真题解析/2020年408真题计算机网络篇/题47]]