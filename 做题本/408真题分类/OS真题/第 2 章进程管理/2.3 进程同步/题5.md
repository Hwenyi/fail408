---
publish: true
tags:
  - 做错了
  - 操作系统
  - 进程
  - 线程
  - 同步
  - 互斥
aliases: 
finished: true
title: 题5
created: 2024-11-01 23:00
updated: 2024-11-05 01:09
TARGET DECK: 刷题::408真题分类::OS真题::第 2 章进程管理::2.3 进程同步::题5
error: true
---
## 题5
### 题目
> [!question]+
> 【2016】进程 ${P}_{1}$ 和 ${P}_{2}$ 均包含并发执行的线程,部分伪代码描述如下所示。
> P1进程
> ```cpp
> // 进程 P1 
> int x = 0;
> 
> Thread1() {
>     int a;
>     a = 1;
>     x += 1;
> }
> 
> Thread2() {
>     int a;
>     a = 2;
>     x += 2;
> }
> ```
> P2进程
> ```cpp
> // 进程 P2 
> int x = 0;
> 
> Thread3() {
>     int a;
>     a = x;
>     x += 3;
> }
> 
> Thread4() {
>     int b;
>     b = x;
>     x += 4;
> }
> ```
> 
> 下列选项中, 需要互斥执行的操作是()。 
> A. `a = 1` 与 `a = 2` 
> B. `a = x` 与 `b = x`
> C. `x += 1` 与 `x += 2`
> D. `x += 1` 与 `x += 3`
### 分析
> [!NOTE]+
> 这个问题，我做了两次，两次都错了，形成了错误的直觉：两个[[进程]]内的x是在自己独立[[地址空间]]里面的，这是两个名字一样，但是地址不一样的x，所以进程之间的x不需要控制，但是[[同步]]一个进程内的[[线程]]，共用了自己所属进程的x，我们需要对这个x进程控制
> 
> 突然发现这个题目和24年真题是一个考点：[[刷题/408历年真题解析/2024年408真题操作系统篇/题28]]，也就是[[线程]]会共享进程的[[地址空间]]，每个线程是独立维护自己的[[栈]]，栈用来存放自己的局部变量
### 解
> [!done]+
> 【参考答案】C
> 【解析】不同线程的 a 不是同一个变量，对 a 的赋值操作无需互斥执行，A 错误；a = x 与 b = x 的执行顺序不影响 a 和 b 的最后结果，无需互斥执行，可以同步执行，B 错误；x += 1 与 x += 2 执行顺序影响 x 的最终结果，故需互斥执行，C 正确；P 和 Q 中的 x 不是同一个变量，也不需要互斥执行，D 错误。故本题选 C.