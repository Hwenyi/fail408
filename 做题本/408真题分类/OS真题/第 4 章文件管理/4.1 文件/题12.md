## 题12
### 题目
【2020】若多个进程共享同一个文件 $\mathrm{F}$ 列下列叙述中,正确的是 ( ) 。 【P108, 23 题】
A. 各进程只能用 “读” 方式打开文件 $\mathrm{F}$
B. 在系统打开文件表中仅有一个表项包含 $\mathrm{F}$ 的属性
C. 各进程的用户打开文件表中关于 $\mathrm{F}$ 的表项内容相同
D. 进程关闭 $\mathrm{F}$ 的,系统删除 $\mathrm{F}$ 在系统打开文件表中的表项
### 分析
我觉得应该是B，多个进程共享，维护的应该是打开次数，所以文件还是只有一份
C这个选项，我觉得应该不对，我觉得大家的文件描述符应该是不同的
### 解
【参考答案】B
【解析】多个进程共享同一个文件，存在多种情况，若进程通过fork创建子进程共享文件，指向的是同一个系统打开文件表项，若两个进程分别通过open打开文件，指向的是不同系统[[打开文件表]]项。
A选项，多个进程同时打开同一个文件时，可以任意对文件进行读写操作，[[操作系统]]并不保证写的[[互斥]]性，进程可以通过[[系统调用]]对文件加锁，从而实现对文件内容的保护；
D选项，系统[[打开文件表]]项可能被其他进程共享，某一进程关闭文件后，要先将表项中打开计数减1，若减1后为0才可以删除。
B、C选项不够严谨并且相互矛盾，但可以设想：多个进程共享文件，每个进程应当希望独立的读写文件，因此是不能共享读写指针的，C选项中各进程的用户打开文件表项应当指向不同的系统打开文件表项，从而达到独立读写的目的。使用排除法，这道题只能选B。