---
publish: true
tags: []
aliases: 
finished: true
title: anki
created: "2024-11-16 23:50"
updated: "2024-11-17 07:50"
TARGET DECK: 刷题::25计组-王道::第 6 章 总线::6.2 总线事务和定时::anki
---
## 6.2 总线

### 总线事务

Q: 什么是总线事务？
A: 从请求总线到完成总线使用的操作序列，发生在一个总线周期中。
![202408152152993.webp](https://img.hwenyi.live/202408152152993.webp)

Q: 典型的总线事务按顺序包括哪些阶段？
A: 请求、仲裁、寻址、传输、释放。
![202408152152993.webp](https://img.hwenyi.live/202408152152993.webp)

### 总线事务的五个阶段

Q: 总线事务的请求阶段由谁发起？
A: **主设备 (CPU 或 DMA) 发出总线传输请求**，并获得总线控制权。

Q: 总线事务的仲裁阶段由谁负责？
A: **总线仲裁机构**决定将下一个传输周期的总线使用权授予某个申请者。

Q: 总线事务的**寻址阶段**，主设备给出什么信息？
A: 主设备通过总线给出要访问的**从设备地址**及有关命令，启动从模块。

Q: 总线事务的**传输阶段**，**主从模块**进行什么操作？
A: 主模块和从模块进行**数据交换**，可**单向或双向**进行数据传送。

Q: 总线事务的**释放阶段**，主模块做什么操作？
A: 主模块的有关信息均**从系统总线上撤除**，让出总线使用权。

### 数据传送方式

Q: 总线上的数据传送方式有哪两种？
A: 非突发方式和突发方式。

Q: 非突发传送方式的特点是什么？
A: 每个传送周期内都**先传送地址**，**再传送数据**，主、从设备之间通常每次只能**传输一个字长**的数据。

Q: 突发传送方式的特点是什么？
A: 能够进行**连续成组数据**的传送。
其**寻址阶段**发送的是连**续数据单元的首地址**，在**传输阶段**传送**多个连续单元的数据**，每个时钟周期可以传送一个字长的信息，但是**不释放总线**，直到一组数据全部传送完毕后，再释放总线。

### 总线定时

Q: 什么是总线定时？
A: 总线在双方交换数据的过程中需要**时间上配合关系的控制**，其实质是一种协议或规则。
![202408152152993.webp](https://img.hwenyi.live/202408152152993.webp)

Q: 总线定时有哪四种方式？
A: 同步定时、异步定时、半同步定时和分离式定时。
![202408152152993.webp](https://img.hwenyi.live/202408152152993.webp)

### 同步定时方式

Q: **同步定时方式**是如何协调发送和接收双方的？
A: 系统**采用一个统一的时钟信号来协调**发送和接收双方的传送定时关系。
![202408152152901.webp](https://img.hwenyi.live/202408152152901.webp)

Q: 同步定时方式的缺点是什么？
A: 主从设备属于强制性同步；不能及时进行数据通信的有效性检验，可靠性较差。

Q: 同步定时方式适用于什么样的系统？
A: 总线长度较短及总线所接部件的存取时间比较接近的系统。
![202408152152901.webp](https://img.hwenyi.live/202408152152901.webp)

Q: 同步串行通信方式的特点是什么？
A: 发送方时钟**直接控制**接收方时钟，使双方完全同步的一种**逐位传输**的通信方式。
使用同步串行通信时，由于收发双方的时钟严格一致，因此**仅在数据块的头尾处添加了开始和结束标记**，传输效率较高，但实现的硬件设备也更复杂。

### 异步定时方式

Q: 异步定时方式是如何实现定时控制的？
A: 完全依靠传送双方相互制约的 “握手” 信号来实现定时控制。
![202408152152400.webp](https://img.hwenyi.live/202408152152400.webp)

Q: 异步定时方式的“握手”信号通常包括哪些？
A: 通常，**主设备提出交换信息的 “请求” 信号**，经接口传送到从设备; 
从设备接到主设备的请求后, **通过接口向主设备发出 “回答” 信号**。

Q: 异步定时方式的优点是什么？
A: **总线周期长度可变**，能保证两个**工作速度相差很大的部件或设备之间可靠地进行信息交换**, 自动适应时间的配合。

Q: 异步定时方式的缺点是什么？
A: 比同步控制方式稍复杂一些，**速度比同步定时方式慢**。

Q: 根据“请求”和“回答”信号的**撤销是否互锁**，异步定时方式分为哪三种类型？
A: 不互锁方式、半互锁方式、全互锁方式。

### 异步定时方式的三种类型

Q: 异步定时方式中，不互锁方式的特点是什么？
A: **不互锁：相互之间不会有制约的撤销关系** 
主设备发出“请求”信号后，**不必等到**接到**从设备的“回答”信号**，而是经过一段时间便**撤销“请求”信号**。
而从设备在接到 “请求” 信号后，发出 “回答” 信号，并经过一段时间后**自动撤销 “回答” 信号**。
双方不存在互锁关系。
![202408152152043.webp](https://img.hwenyi.live/202408152152043.webp)

Q: 异步定时方式中，**半互锁方式**的特点是什么？
A: ![202408152152584.webp](https://img.hwenyi.live/202408152152584.webp)
主设备发出 “请求” 信号后，**必须在接到从设备的 “回答” 信号**后，**才撤销 “请求” 信号**，有互锁的关系。
而从设备在接到 “请求” 信号后，发出 “回答” 信号，**但不必等待获知主设备的 “请求” 信号已经撤销**，而是隔一段时间后自动撤销 “回答” 信号，不存在互锁关系。

Q: 异步定时方式中，全互锁方式的特点是什么？
A: 主设备发出 “请求” 信号后，**必须**在从设备 “**回答**” 后**才撤销 “请求” 信号**;
从设备发出 “回答” 信号后，必须在获知主设备 “请求” 信号已撤销后，再撤销其 “回答” 信号。双方存在互锁关系。
![202408152152719.webp](https://img.hwenyi.live/202408152152719.webp)

### 异步串行通信方式

Q: **异步串行**通信方式是如何保证数据传输的准确性的？
A: **每个字符都要用开始位和停止位作为字符开始和结束的标志**, 从而保证数据传输的准确性。

Q: **异步串行通信方式**的**开始位和停止位**分别是什么逻辑电平？
A: 开始位是逻辑 “ 0 ” ，停止位是逻辑 “ 1 ”。

Q: 异步串行通信方式中奇偶校验位的用途是什么？
A: 用于**有限的**差错检测。

### 半同步定时方式

Q: 半同步定时方式是如何工作的？
A: 半通信会**增加一个反馈的信号 WAIT**，主要是通过异步通信的思想来去弥补同步通信中可能会出现的问题。
保留了同步定时的特点, 如所有地址、命令、数据信号的发出时间都**严格参照系统时钟的某个前沿**开始, **而接收方都采用系统时钟后沿时刻**来进行判断识别; 
同时, 又像异步定时那样, 允许不同速度的设备和谐地工作。
为此增设一条 Wait 响应信号线。
![202408152152137.webp](https://img.hwenyi.live/202408152152137.webp)

Q: 半同步定时方式的优点是什么？
A: 控制方式比异步定时简单，各模块在系统时钟的控制下同步工作，可靠性较高。
![202408152152137.webp](https://img.hwenyi.live/202408152152137.webp)

Q: 半同步定时方式的缺点是什么？
A: 系统时钟频率不能要求太高，所以从整体上来看，系统工作的速度不是很高。
![202408152152137.webp](https://img.hwenyi.live/202408152152137.webp)

### 分离式定时方式

Q: 分离式定时方式是如何工作的？
A: ![202408152152157.webp](https://img.hwenyi.live/202408152152157.webp)
将总线事务分解为**请求和应答两个子过程**。
在第一个子过程中，主设备 A 获得总线使用权后,将命令、地址等信息发到总线上，经总线传输后由从设备 B 接收。
此过程占用总线的时间很短，**主设备一旦发送完，立即释放总线**，以便其他设备使用。
在第二个子过程中，设备 B 收到设备 A 发来的有关命令后，将设备 A 所需的数据准备好后，便由设备 B 申请总线使用权，一旦获准，设备 B 便将相应的数据送到总线上，由设备 A 接收。
上述两个子过程都**只有单方向的信息流，每个设备都变为主设备**。

Q: 分离式定时方式的优点是什么？
A: 在**不传送数据时释放总线**，使总线**可接受其他设备的请求**，**不存在空闲等待**时间。

Q: 分离式定时方式的缺点是什么？
A: 控制复杂，开销也大。

### 总线带宽

Q: 什么是总线带宽？
A: 指**单位时间内总线上传输数据的位数**，通常**用每秒传送信息的位数来衡量**，是衡量总线性能的重要指标。

Q: 总线在数据传输过程中可能会出现哪些错误？
A: 奇偶校验错误、CRC 校验错误等。

Q: 如何处理总线错误？
A: 可以采用一些错误检测和纠正机制，例如奇偶校验、CRC 校验、重传等，来保证数据的可靠传输。

