---
publish: true
tags: 
aliases: 
finished: true
title: 题43
created: "2024-11-21 06:44"
updated: "2024-11-21 07:40"
---
## 题43
### 题目
> [!question]+
> （13 分）
> 
> 某 16 位计算机的主存按字节编址，存取单位为 16 位；采用 16 位定长指令字格式；CPU 采用单总线结构，主要部分如下图所示。图中 R0～R3 为通用寄存器；T 为暂存器；SR 为移位寄存器，可实现直送 (mov)、左移一位(left) 和右移一位 (right)3 种操作，控制信号为 SRop，SR 的输出由信号 SRout 控制；ALU 可实现直送 A(mova)、A 加 B(add)、A 减 B(sub)、A 与 B(and)、A 或 B(or)、非 A(not)、A 加 1(inc) 这 7 种操作，控制信号为 ALUop。
> 
> ![](https://img.hwenyi.live/202412030213509.webp)
> 
> 注：已补充内总线到 MAR 的箭头和内总线到 IR 的箭头。
> 
> 请回答下列问题。
> 
> (1) 图中哪些寄存器是程序员可见的？为何要设置暂存器 T？
> 
> (2) 控制信号 ALUop 和 SRop 的位数至少各是多少？
> 
> (3) 控制信号 SRout 所控制部件的名称或作用是什么？
> 
> (4) 端点①～⑨中，哪些端点须连接到控制部件的输出端？
> 
> (5) 为完善单总线数据通路，需要在端点①～⑨中相应的端点之间添加必要的连线。写出连线的起点和终点，以正确表示数据的流动方向。
> 
> (6) 为什么二路选择器 MUX 的一个输入端是 2？
### 解
> [!done]+
> (1) 第一问。程序员可见寄存器为通用寄存器 R0～R3 和 PC。
> 
> 第二问。因为 CPU 采用单总线结构同一时间内，只能有一个操作数在单总线上，为了把两个操作数输入到 ALU，需要分两次来做，而只有两个操作数同时出现在 ALU 的两个输入端，ALU 才能执行运算。因此若无暂存器 T，则 ALU 的 A、B 端口会同时获得两个相同的数据，使数据通路不能正常工作。
> 
> (2) ALU 共有 7 种操作，故其操作控制信号 ALUop 至少需要 $\lceil \log 7 \rceil= 3$ 位；移位寄存器有 3 种操作，其操作控制信号 SRop 至少需要 $\lceil \log 3 \rceil= 2$ 位。
> 
> (3) 因为 CPU 采用单总线结构，为了防止总线冲突，挂载在总线上的部件需要用三态门进行控制，所以信号 Sout 所控制的部件是一个三态门，用于控制移位器与总线之间数据通路的连接与断开。三态门第一次出现在 2009 年题 44 中，三态门的定义和作用详见该题题解。
> 
> (4) 端口①、②、③、⑤、⑧须连接到控制部件输出端。
> 
> (5) 加法操作需要两个操作数作为输入，一个输入经暂存器 T 进入 ALU 的 A 端，另一个输入经过 MUX 进入 ALU 的 B 端。很容易得到连线。
> 
> 连线 1，⑥→⑨；连线 2，⑦→④。
> 
> 注：MUX 是 multiplexers 的缩写，称为数据选择器，也称多路选择器或多路开关。在多路数据传送过程中，能够根据需要将其中任意一路选出来的电路。
> 
> (6) 因为每条指令的长度为 16 位，按字节编址，所以每条指令占用 16bit/1B=2 个内存单元，顺序执行时，下条指令地址为 (PC)+2。MUX 的一个输入端为 2，便于执行 (PC)+2 操作。