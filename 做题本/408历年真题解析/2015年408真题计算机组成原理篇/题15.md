---
publish: true
tags: 
aliases: 
finished: true
title: 题15
created: "2024-11-21 06:46"
updated: "2024-11-21 07:40"
---
## 题15
### 题目
> [!question]+
> 假定主存地址位数为 32 位，按字节编址，主存和 Cache 之间采用直接映射方式，主存块大小为 4 个字，每字 32 位，写操作时采用回写 (Write Back) 方式，则能存放 4K 字数据的 Cache 的总容量的位数至少是（ ）。
> 
> A. 146K
> 
> B. 147K
> 
> C. 148K
> 
> D. 158K
### 解
> [!done]+
> 直接映射方式的格式为 $\begin{array}{|c|c|c|}\hline\text{主存字块标记}&\text{行号}&\text{块内地址}\\\hline\end{array}$ 。
> 
> 因为主存块大小为 4 个字，每字 32 位，所以块大小为 4×32bit=16B= B。计算机字节编址，所以块内地址占 4 位。
> 
> 因为 Cache 能存放 4K 字数据，块大小为 4 个字，所以 Cache 行数为 4K/4=1K= ，行号占 10 位。
> 
> 因为主存地址位数为 32 位，块内地址占 4 位，行号占 10 位，所以主存字块标记占 32-4-10=18 位。
> 
> 写操作时采用回写 (Write Back) 方式，标记位包含 1 位脏位，还有 18 位主存字块标记位和 1 位有效位。每行标记占 18+1+1=20 位，每行数据占 4 个字，每字 32 位，即 4×32=128 位。
> 
> Cache 的总容量 =(每行标记位数 + 每行数据位数)× 行数 =(20+128)×1K=148K。
> 
> 本题选 C。
> 
> **_举一反三_**
> 
> 假定主存地址位数为 32 位，按字节编址，主存和 Cache 之间采用直接映射方式，主存块大小为 1 个字，每字 32 位，写操作时采用直写 (Write Throght) 方式，则能存放 32K 字数据的 Cache 的总容量的位数至少是（ ）。
> 
> 参考答案：1536K