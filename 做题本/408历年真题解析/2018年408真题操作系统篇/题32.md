---
publish: true
tags: 
aliases: 
finished: true
title: 题32
created: "2024-11-21 07:18"
updated: "2024-11-21 07:40"
---
## 题32
### 题目
> [!question]+
> 在下列同步机制中，可以实现让权等待的是（ ）。
> 
> A. Peterson 方法
> 
> B. swap 指令
> 
> C. 信号量方法
> 
> D. TestAndSet 指令
### 解
> [!done]+
> 让权等待是指当一个进程需要访问共享资源或进入临界区时，如果该资源或临界区已经被占用，该进程会主动放弃执行权，让其他进程先执行。这种机制可以避免进程过多地忙等待资源或临界区，提高系统的效率和公平性。
> 
> 在多进程或多线程环境下，实现让权等待的方式通常有以下几种：
> 
> 1. 睡眠 / 唤醒机制：当一个进程发现资源或临界区被占用时，它可以放弃执行权，主动进入睡眠状态，等待资源可用或临界区解锁时被唤醒。这样可以让其他进程有机会执行。
> 2. 条件变量：条件变量是一种同步原语，可以与互斥锁结合使用。当一个进程发现条件不满足时，它可以通过条件变量进入等待状态，同时释放互斥锁，让其他进程有机会执行。当条件满足时，其他进程可以通过条件变量进行通知，唤醒等待的进程。
> 3. 信号量：信号量是一种计数器，用于控制对共享资源的访问。当进程需要访问资源时，它会尝试获取信号量。如果信号量的值为 0，表示资源已被占用，则进程会被阻塞，放弃执行权。当资源可用时，其他进程可能会释放信号量，唤醒等待的进程，使其可以继续执行。
> 
> A 错误。Peterson 方法是一种经典的软件同步机制，用于实现两个进程之间的互斥访问。该方法通过使用共享的 bool 型变量和一个 turn 变量来控制进程的执行顺序，从而实现有限等待的效果。当一个进程需要进入临界区时，它会标记自己希望进入的意向，并将执行权交给另一个进程。如果两个进程都希望进入临界区，而且轮到另一个进程执行的话，当前进程将会等待。通过不断交替执行和等待，最终可以实现进程的互斥执行。
> 
> B 错误。swap 指令通常用于原子操作，可以交换两个变量的值。它无法实现让权等待。
> 
> C 正确。记录型信号量由于引入阻塞机制，消除了不让权等待的情况。
> 
> D 错误。TestAndSet 指令是一种原子操作，用于检查一个变量的值并设置新值。它可以用于实现其他同步机制，如自旋锁和互斥量，但并不能直接实现让权等待。
> 
> 本题选 C。
> 
> **_总结_**
> 
> 访问临界资源需要遵循的原则
> 
> - 空闲让进：临界区空闲时，允许一个请求进入临界区的进程立即进入临界区。
> - 忙则等待：当已有进程进入临界区，其他试图进入临界区的进程必须等待。
> - 有限等待：对请求访问的进程，应保证能在有限时间内进入临界区（保证不会饥饿）。
> - 让权等待：进程不能进入临界区，应当立即释放处理机，防止进程忙等待。
> 
> 进程互斥的实现方法与四大原则
> 
> - 单标志法：违背空闲让进原则。
> - 双标志先检查法：满足空闲让进原则，违背忙则等待原则。
> - 双标志后检查法：满足忙则等待原则，违背空闲让进、有限等待、让权等待原则。
> - Peterson 算法：满足空闲让进、忙则等待、有限等待原则，违背让权等待原则。
> - TestAndSet 指令：满足空闲让进、忙则等待、有限等待原则，违背让权等待原则。
> - swap 指令：满足空闲让进、忙则等待、有限等待原则，违背让权等待原则。
> - 信号量方法：其中信号量一般指记录型信号量，满足空闲让进、忙则等待、有限等待、让权等待原则。
> - 管程：满足空闲让进、忙则等待、有限等待、让权等待原则。