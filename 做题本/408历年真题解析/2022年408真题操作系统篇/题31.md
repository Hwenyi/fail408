---
publish: true
tags: 
aliases: 
finished: true
title: 题31
created: "2024-11-21 07:26"
updated: "2024-11-21 07:40"
---
## 题31
### 题目
> [!question]+
> 执行系统调用的过程涉及下列操作，其中由操作系统完成的是（ ）。
> 
> Ⅰ. 保存断点和程序状态字
> 
> Ⅱ. 保存通用寄存器的内容
> 
> Ⅲ. 执行系统调用服务程序
> 
> Ⅳ. 将 CPU 模式改为内核态
> 
> A. 仅 Ⅰ、Ⅲ
> 
> B. 仅 Ⅱ、Ⅲ
> 
> C. 仅 Ⅱ、Ⅳ
> 
> D. 仅 Ⅱ、Ⅲ、Ⅳ
### 解
> [!done]+
> 在 x86 架构的处理器上，将 CPU 模式从用户态切换为内核态可以通过系统调用或陷阱来实现。以下是通常的步骤：
> 
> 1. 用户程序通过发起系统调用或触发异常，例如访问特权指令或引发保护异常。
> 2. CPU 接收到异常或中断信号后，会暂停用户态的执行，并保存用户态下的程序状态（如程序计数器、标志寄存器等）。
> 3. CPU 切换到内核态，并将控制权交给内核。这通常通过将程序计数器指向内核代码的入口地址来实现。
> 4. 在内核态下，操作系统可以处理具体的系统调用或异常，并执行相应的内核代码。
> 5. 处理完系统调用或异常后，CPU 可以将返回值等结果保存在合适的位置。
> 6. CPU 通过加载用户程序保存的程序状态，将控制权切回用户态，恢复用户程序的执行。
> 
> I 错误。保存断点和程序状态字由中断隐指令完成。中断隐指令并不是指令系统中的一条真正的指令，它没有操作码，所以中断隐指令是一种不允许、也不可能为用户使用的特殊指令。
> 
> Ⅱ 正确。保存通用寄存器的内容由中断服务程序完成。中断服务程序是由操作系统提供和管理的。
> 
> Ⅲ 正确。当用户程序发起系统调用时，CPU 会切换到内核态，进入操作系统指定的系统调用服务程序中。在系统调用服务程序中，操作系统会根据系统调用号和参数来执行相应的操作，并返回结果给用户程序。
> 
> IV 错误。将 CPU 模式从用户态改为内核态由硬件完成，硬件会执行一系列操作，包括将栈指针切换到内核栈，修改指令指针以跳转到相应的内核代码，修改特权级别等，从而实现 CPU 模式从用户态到内核态的切换。
> 
> 综上，仅 Ⅱ、Ⅲ 正确。
> 
> 本题选 B。