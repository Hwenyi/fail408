---
publish: true
tags: 
aliases: 
finished: true
title: 题44
created: "2024-11-21 07:16"
updated: "2024-11-21 07:40"
---
## 题44
### 题目
> [!question]+
> （9 分）
> 
> 假定 CPU 主频为 50MHz，CPI 为 4。设备 D 采用异步串行通信方式向主机传送 7 位 ASCII 字符，通信规程中有 1 位奇校验位和 1 位停止位，从 D 接收启动命令到字符送入 I/O 端口需要 0.5ms。请回答下列问题，要求说明理由。
> 
> (1) 每传送一个字符，在异步串行通信线上共需传输多少位？在设备 D 持续工作过程中，每秒钟最多可向 I/O 端口送入多少个字符？
> 
> (2) 设备 D 采用中断方式进行输入 / 输出，示意图如下∶
> 
> ![](https://picx.zhimg.com/v2-236d7ceff0b0e7cdeb67e5f413e99ab5_r.jpg)
> 
> I/O 端口每收到一个字符申请一次中断，中断响应需 10 个时钟周期，中断服务程序共有 20 条指令，其中第 15 条指令启动 D 工作。若 CPU 需从 D 读取 1000 个字符，则完成这一任务所需时间大约是多少个时钟周期？CPU 用于完成这一任务的时间大约是多少个时钟周期？在中断响应阶段 CPU 进行了哪些操作？
### 解
> [!done]+
> (1) 第一问。每传送一个 ASCII 字符，需要传输的位数有 1 位起始位、7 位数据位（ASCII 字符占 7 位）、1 位奇校验位和 1 位停止位，故总位数为 1+7+1+1=10。
> 
> 第二问。从 D 接收启动命令到字符送入 I/O 端口需要 0.5ms，I/O 端口每秒钟最多可接收 1×1s/0.5ms=2000 个字符。
> 
> (2) 第一问。一个字符传送时间包括：设备 D 将字符送 I/O 端口的时间、中断响应时间和中断服务程序前 15 条指令的执行时间。CPU 主频为 50MHz，CPU 时钟周期为 1/(50MHz)=20ns，设备 D 将字符送 I/O 端口的时间为 0.5ms/20ns=25000 个时钟周期，中断响应需 10 个时钟周期，CPI 为 4，中断服务程序前 15 条指令的执行时间为 15×4=60 个时钟周期，综上，一个字符的传送时间大约为 25000+10+60=25070 个时钟周期。完成 1000 个字符传送所需时间大约为 1000×25070=25070000 个时钟周期。
> 
> 第二问。CPU 用于一次中断的时间包括：中断响应时间和中断服务程序的执行时间。中断响应需 10 个时钟周期，中断服务程序共有 20 条指令，CPI 为 4，中断服务程序的执行时间为 20×4=80 个时钟周期，I/O 端口每收到一个字符申请一次中断，CPU 用于从 D 读取 1000 个字符的时间大约为 1000×(10+80)=90000= $9\times10^4$ 个时钟周期。
> 
> 第三问。
> 
> 参考答案一：
> 
> 在[[中断响应]]阶段中，[[CPU]] 主要完成以下操作：
> 
> ①确定中断源：向中断源查询电路发出[[中断响应]][[信号]] INTA，去读取当前最高优先权的中断源编码。
> 
> ②[[关中断]]：将中断允许触发器 IE 清 0，暂时不再响应任何中断请求。
> 
> ③保护程序[[断点]]：将中断执行的指令地址，即[[程序计数器]] PC 的内容，推入堆栈保护起来，以便在中断服务完毕，返回到中断点，继续执行被中断的程序。
> 
> ④转至相应的[[中断服务程序]]入口：根据从中断查询电路获取的中断源编码，转至相应的中断服务程序入口。
> 
> 参考答案二：
> 
> 在中断响应阶段中，CPU 主要完成以下操作：
> 
> ①关中断。CPU 进入中断周期，意味着 CPU 响应了某个中断源的请求，为了确保 CPU 响应后所需做的一系列操作不至于又受到新的中断请求的干扰，在中断周期内必须自动关中断，以禁止 CPU 再次响应新的中断请求。
> 
> ②保护程序断点：将当前程序计数器 (PC) 的内容（程序断点）保存到存储器中，以便在中断服务完毕，返回到中断点，继续执行被中断的程序。
> 
> ③引出中断服务程序。取出中断服务程序的入口地址（中断向量）并传送给程序计数器 (PC)。