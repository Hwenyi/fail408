---
publish: true
tags: 
aliases: 
finished: true
title: 题45
created: "2024-11-21 06:41"
updated: "2024-11-21 07:40"
---
## 题45
### 题目
> [!question]+
> （7 分）
> 
> 某请求分页系统的局部页面置换策略如下：系统从 0 时刻开始扫描，每隔 5 个时间单位扫描一轮驻留集（扫描时间忽略不计），本轮没有被访问过的页框将被系统回收，并放入到空闲页框链尾，其中内容在下一次被分配之前不被清空。当发生缺页时，如果该页曾被使用过且还在空闲页框链表中，则重新放回进程的驻留集中；否则，从空闲页框链表头部取出一个页框。
> 
> 假设不考虑其他进程的影响和系统开销，初始时进程驻留集为空。目前系统空闲页框链表中页框号依次为 32、15、21、41。进程 P 依次访问的 <虚拟页号，访问时刻> 是：
> 
> <1, 1>、<3, 2>、<0, 4>、<0, 6>、<1, 11>、<0, 13>、<2, 14>。请回答下列问题。
> 
> (1) 访问 < 0, 4 > 时，对应的页框号是什么？
> 
> (2) 访问 < 1, 11 > 时，对应的页框号是什么？说明理由。
> 
> (3) 访问 < 2, 14 > 时，对应的页框号是什么？说明理由。
> 
> (4) 该策略是否适合于时间局部性好的程序？说明理由。
### 解
> [!done]+
> **方法一：增加标记位**
> 
> 为了方便讨论，驻留集的页表中每个记录增加标记位，表示本轮该页面是否被访问，若该页面被访问，则标记位为 1，否则标记位为 0。这样每次访问某页只需要将该页的页表项中的访问位设为 1，每次扫描将访问位为 1 的页表项的访问位修改为 0，将访问位为 0 的页表项的页框回收。
> 
> 初始时系统空闲页框链表中页框号依次为 32、15、21、41。进程 P 依次访问的 <虚拟页号，访问时刻> 是：<1, 1>、<3, 2>、<0, 4>、<0, 6>、<1, 11>、<0, 13>、<2, 14>。模拟完整过程如下：
> 
> ![](https://img.hwenyi.live/202411081935924.webp)
> 
> **方法二：仿照 LRU 算法**
> 
> 仿照 LRU 算法（LRU 算法的具体实现可参考力扣 [146. LRU 缓存](https://leetcode.cn/problems/lru-cache/)），通过移动链表结点调整结点访问优先级。用蓝色标记页框链表中本轮被访问过的页框，黄色标记页框链表中本轮未被访问过的页框，所有黄色结点构成空闲页框链表，所有蓝色结点构成驻留集。这样每次访问某页只需要将该页被分配的页框号移动到链表尾，并标记为蓝色，每次扫描将页框链表中所有结点恢复成黄色。
> 
> 初始时系统空闲页框链表中页框号依次为 32、15、21、41。进程 P 依次访问的 <虚拟页号，访问时刻> 是：<1, 1>、<3, 2>、<0, 4>、<0, 6>、<1, 11>、<0, 13>、<2, 14>。模拟完整过程如下：
> 
> ![](https://img.hwenyi.live/202411081935925.webp)
> 
> 注：题 45 图 (a) 和题 45 图 (b) 中空闲页框链表中结点的括号内数字表示最近一次页框号被分配的页号。
> 
> (1) 访问 < 0, 4 > 时，对应的页框号是 21。
> 
> 初始时进程驻留集为空，系统空闲页框链表中页框号依次为 32、15、21、41，时刻 4 是第一轮的第三次访问，且访问的页号与前两次均不同。而 0 页对应的页框为空闲链表中的第三个空闲页框号是 21。
> 
> (2) 访问 < 1, 11 > 时，对应的页框号是 32。
> 
> 第三轮初始时系统空闲页框链表中页框号依次为 41、32(1)、15(3)，括号内数字表示最近一次页框号被分配的页号，时刻 11 是第三轮的第一次访问，而且访问页面 1 之前被分配的页框号为 32，将页框 32 重新放入驻留集中。
> 
> (3) 访问 < 2, 14 > 时，对应的页框号是 41。
> 
> 第三轮初始时系统空闲页框链表中页框号依次为 41、32(1)、15(3)，括号内表示最近一次页框号分配的页号，时刻 14 是第三轮的第三次访问，页面 2 从来没有被访问过，因此从空闲页框链表中取出链表头的页框 41，页框号为 41。
> 
> (4) 该策略适合于时间局部性好的程序。
> 
> 如果程序的时间局部性越好，从空闲页框链表中重新取回的机会越大，该策略的优势越明显。