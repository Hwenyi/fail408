---
publish: true
tags: 
aliases: 
finished: true
title: 题40
created: "2024-11-21 07:27"
updated: "2024-11-21 07:40"
---
## 题40
### 题目
> [!question]+
> 根设主机 H 通过 HTTP/1.1 请求浏览某 Web 服务器 S 上的 Web 页 news408.html，news408.html 引用了同目录下 1 个图像，news408.html 文件大小为 1MSS（最大段长），图像文件大小为 3 MSS，H 访问 S 的往返时间 RTT=10 ms，忽略 HTTP 响应报文的首部开销和 TCP 段传输时延。若 H 已完成域名解析，则从 H 请求与 S 建立 TCP 连接时刻起，到接收到全部内容止，所需的时间至少是（ ）。
> 
> A. 30 ms
> 
> B. 40 ms
> 
> C. 50 ms
> 
> D. 60 ms
### 解
> [!done]+
> HTTP/1.1 默认使用持久连接，保证在事务处理结束之后将 TCP 连接保持在打开状态，以便为未来的 HTTP 请求重用现存的连接。本题中 Web 页和图像均来自 news408.html，所以只需要建立一次 TCP 连接。
> 
> [[HTTP超文本传输协议|HTTP]]/1.1 默认使用流水线方式：客户在收到 HTTP 的响应报文之前就能够接着发送新的请求报文。一个接一个的请求报文到达服务器后，服务器就可连续发回响应报文。相比非流水线方式，即客户在收到前一个响应后才能发出下一个请求，效率大大提升。
> 
> 因为 H 已完成域名解析，即 H 已经获得 S 的 IP 地址，没有 DNS 开销。
> 
> [[TCP-传输控制协议-详解|TCP]] 协议建立连接的三次握手过程中的第三次握手允许携带数据。前两次握手需要 1 个 RTT，从第三次握手开始，即从第 2 个 RTT 开始，采用[[慢开始算法]]请求数据。设置 cwnd = 1 MSS。假设传输过程中，网络没有出现拥塞。
> 
> 第 2 个 RTT 采用捎带确认开始请求请求 Web 页资源，服务器 S 首先返回 news408.html 文件，由于拥塞窗口大小 cwnd = 1 MSS 大于或等于 news408.html 文件大小 1 MSS，忽略 HTTP 响应报文的首部开销和 TCP 段传输时延，所以可以在该 RTT 内完成请求。
> 
> 第 3 个 RTT 开始时 H 已收到 news408.html 文件，并得知其中含对象引用，采用捎带确认继续请求请求 Web 页资源，服务器 S 收到确认后，调整当前拥塞窗口大小为上一轮次拥塞窗口大小的两倍，即调整 cwnd = 2 MSS，图像文件大小为 3 MSS > 2 MSS，因此需要分多个 RTT 请求，忽略 HTTP 响应报文的首部开销，可以先发送图像的前 2 个 MSS。
> 
> 第 4 个 RTT 开始时 H 已收到图像的前两个 MSS，向服务器 S 返回 TCP 确认段，服务器 S 收到该确认段后，调整当前拥塞窗口大小为上一轮次拥塞窗口大小的两倍，即调整 cwnd = 4 MSS，图像还剩余 3 MSS - 2 MSS = 1 MSS，忽略 HTTP 响应报文的首部开销，可以发送图像的剩余 1 个 MSS。第 4 个 RTT 结束时，H 已经收到全部内容。
> 
> 上述过程的示意图如下：
> 
> ![](https://picx.zhimg.com/v2-f58547ae9bd24338b8012a6a77f6ae17_r.jpg)
> 
> 在上述理想情况下，忽略 TCP 段传输时延。整个过程需要 4 个 RTT，RTT=10 ms，4RTT=40 ms。因此从 H 请求与 S 建立 TCP 连接时刻起，到接收到全部内容止，所需的时间至少是 40 ms。
> 
> 本题选 B。