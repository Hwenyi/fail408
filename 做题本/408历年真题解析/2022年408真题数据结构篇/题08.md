---
publish: true
tags: 
aliases: 
finished: true
title: 题08
created: "2024-11-21 07:27"
updated: "2024-11-21 07:40"
---
## 题08
### 题目
> [!question]+
> 在下图所示的 5 阶 B 树 $T$ 中，删除关键字 $260$ 之后需要进行必要的调整，得到新的 B 树 $T_1$ 。下列选项中，不可能是 $T_1$ 根结点中的关键字序列的是（ ）。
> 
> ![](https://picx.zhimg.com/v2-139258e7e2f929b91c49774c3cf5ee59_r.jpg)
> 
> A. $60, 90, 280$
> 
> B. $60, 90, 350$
> 
> C. $60, 85, 110, 350$
> 
> D. $60, 90, 110, 350$
### 解
> [!done]+
> **方法一：搜索树性质**
> 
> B 树是一棵多路平衡搜索树，B 树满足搜索树性质，即关键字从左到右单调递增。
> 
> $m$ 阶 B 树每个结点（除根结点外）关键字数量 $n$ 为 $\lceil m/2 \rceil-1\le n \le m-1$ 。本题 5 阶 B 树， $2\le n \le 4$ 。
> 
> 注意，这道题考察不可能。我们可以正向推导，删除关键字 260，然后对 B 树进行调整。
> 
> 这里提供逆向思维，我们从选项出发，构造出对应的搜索树。
> 
> 或是说，我们并不需要构造出 B 树中删除操作的算法，构造 B 树删除操作的算法有一个原则就是不能违反 B 树的性质，所以我们只需要检查结果有没有违反 B 树性质。
> 
> B 树满足搜索树性质，即关键字从左到右单调递增，本题中，叶结点的所有关键字范围在其父结点的两个关键字之间，某结点的最左端叶结点可以视为该叶结点的前驱结点的最右关键字到该结点第一个关键字之间，某结点的最右端叶结点可以视为最后一个关键字到该叶结点的后继结点的最左关键字之间。如果某结点的最左端叶结点没有前驱可以视为 $-\infty$ 到该结点第一个关键字之间，如果某结点的最右端叶结点没有后继可以视为最后一个关键字到 $+\infty$ 之间。
> 
> 然后检查是否为构造的树是否为一棵 5 阶 B 树。
> 
> ![](https://pic2.zhimg.com/v2-565c4ccc645f5acb492e9a1fc8366409_r.jpg)
> 
> 很明显 D 中关键字 100 所在的结点只有一个关键字，违反 $2\le n \le 4$。
> 
> 本题选 **D**。
> 
> **方法二：执行删除操作**
> 
> 本题考察 B 树的性质，以及删除操作后出现的情况。因为《数据结构（C 语言版）》并未详细介绍 B 树中非叶结点中关键字的删除操作，所以这道题从正面推导难度极大。
> 
> 方案一：用直接后继替换（《数据结构（C 语言版）》（参考《数据结构基础》第一版）B 树删除操作）
> 
> ![](https://pic1.zhimg.com/v2-4761fb83095ad0392b0c69ee58e56256_r.jpg)
> 
> 找到 260 的直接后继关键字 280，删除 260，将 280 上移到原先 260 所在的位置，此时 300 所在结点只有一个关键字，该结点的右兄弟结点关键字个数等于 2，即 “兄弟不够借”，将该结点和其右兄弟结点合并新的孩子结点，并将 350 下移到该新的孩子结点。A 选项正确。
> 
> 方案二：用直接前驱替换（镜像版《数据结构（C 语言版）》（参考《数据结构基础》第一版）B 树删除操作）
> 
> ![](https://picx.zhimg.com/v2-306c7384fcaaa5f3a4b5b8eb208eef97_r.jpg)
> 
> 找到 260 的直接前驱关键字 110，删除 260，将 110 上移到 260 原先所在的位置，此时 100 所在结点只有一个关键字，该结点的左兄弟结点关键字个数大于 2，即 “兄弟够借”，将 90 下移到 100 所在结点，再将 85 上移到原先 90 所在的位置，结束。C 选项正确。
> 
> 方案三：合并孩子结点（《数据结构基础》第二版 B 树删除操作或《算法导论》B 树删除操作思想）
> 
> ![](https://picx.zhimg.com/v2-a8ca2ebd9a0a611e8ef6c65b698b3b61_r.jpg)
> 
> 删除 260 后合并原 260 左右两个孩子结点，形成新的孩子结点。B 选项正确。
> 
> 只有 D 选项没有办法通过以上途径构造。
> 
> 本题选 **D**。
> 
> 总结：对于 B 树的删除操作，一般解题步骤如下：
> 
> 第一步：检查 B 树中每个结点的度和包含关键字数量是否合规。
> 
> 第二步：检查 B 树中是否满足搜索树性质。
> 
> 第三步：观察 B 树的叶结点执行删除关键字操作后可能的情况，有直接删除，“兄弟够借”，“兄弟不够借”三种情况。特别是 “兄弟不够借” 产生下溢需要迭代执行，若下溢一直传递到根结点导致根结点变空则需要改变根结点，B 树高度减一。
> 
> **_拓展_**
> 
> 《数据结构（C 语言版）》仅简单介绍了 B 树中非叶结点中关键字的删除操作，详见《数据结构基础》1976 年版，即《数据结构基础》的第一版，10.2.3 节 Tree-Indexing: B-Trees。合并孩子结点参考了《数据结构基础》第二版中的 B 树删除操作的算法，详见《数据结构基础》第二版 11.2.4 节 B 树的删除操作中的第四种情形，或《算法导论》中的 B 树删除操作的算法思想。
> 
> 参考《数据结构（C 语言版）》的参考用书《数据结构基础》相关章节如下：
> 
> - [《数据结构（C 语言版）》B 树中的删除操作完整版解读](https://zhuanlan.zhihu.com/p/623572741)
> 
> 参考《算法导论》相关章节如下：
> 
> - [算法导论（第四版）第十八章：B 树　第三节：从 B 树中删除一个关键字](https://zhuanlan.zhihu.com/p/581952225)
> 
> 本人整理如下：
> 
> [408 数据结构考点：B 树](https://zhuanlan.zhihu.com/p/625344869)