---
publish: true
tags: 
aliases: 
finished: true
title: 题46
created: "2024-11-21 07:21"
updated: "2024-11-21 07:40"
---
## 题46
### 题目
> [!question]+
> （7 分）
> 
> 对于题 45，若计算机 M 的主存地址为 32 位，釆用分页存储管理方式，页大小为 4KB，
> 则第 1 行的 push 指令和第 30 行的 ret 指令是否在同一页中（说明理由）？
> 若指令 Cache 有 64 行，采用 4 路组相联映射方式，主存块大小为 64B，则 32 位主存地址中，哪几位表示块内地址？
> 哪几位表示 Cache 组号？
> 哪几位表示标记（tag）信息？
> 读取第 16 行的 call 指令时，只可能在指令 Cache 的哪一组中命中（说明理由）？
> ![](https://img.hwenyi.live/202411121604253.webp)
### 解
> [!done]+
> 第一问。第 1 行指令和第 30 行指令的代码在同一页。
> 
> 因为计算机 M 的主存地址为 32 位，釆用分页存储管理方式，虚拟地址格式为 虚页号 | 页内地址，页大小为 4KB= $2^{12}$B，根据题 45，计算机 M 按字节编址，所以页内地址占低 12 位，虚页号占高 32-12=20 位。第 1 行指令地址为 $\rm\underbrace{00401}_{\text{虚页号}}\underbrace{000}_{\text{页内地址}}H$ ，第 30 行指令地址为 $\rm \underbrace{00401}_{\text{虚页号}}\underbrace{04A}_{\text{页内地址}}H$ ，两者虚页号均为 00401H，因此两条指令在同一页中。
> 
> 第二、三、四问。组相联映射格式为 $\begin{array}{|c|c|c|}\hline \text{主存字块标记}&\text{组号}&\text{块内地址}\\\hline \end{array}$ 。若指令 Cache 有 64 行，采用 4 路组相联映射方式，Cache 组数为 64/4=16= $2^4$ ，组号占中间 4 位，主存块大小为 64B= $2^6$B，根据题 45，计算机 M 按字节编址，所以块内地址占低 6 位，在 32 位主存地址中，物理地址占 32 位，主存字块标记占高 32-4-6=22 位。所以物理地址 0~5 位为块内地址，6~9 位为组号，10~31 位为标记（tag）信息。
> 
> 第五问。读取第 16 行 call 指令时，只可能在指令 Cache 第 0 组中命中。因为第 16 行指令地址为 $\rm\underbrace{00401}_{\text{虚页号}}\underbrace{025}_{\text{页内地址}}H$ ，页大小为 4KB，虚拟地址和物理地址的最低 12 位完全相同，块内地址占 6 位，组号占 4 位，两者组合在一起占低 10 位，所以页内地址包含组号和块内地址。页内地址 025H= $\rm00\underbrace{00 00}_{\text{组号}}\underbrace{10 0101}_{\text{块内地址}}B$ ，所以对应 Cache 组号为 0000B=0。