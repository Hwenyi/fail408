---
publish: true
tags: 
aliases: 
finished: true
title: 题46
created: "2024-11-21 06:44"
updated: "2024-11-21 07:40"
---
## 题46
### 题目
> [!question]+
> （6 分）
> 
> 某计算机系统按字节编址，采用二级页表的分页存储管理方式，虚拟地址格式如下所示：
> 
> $\begin{array}{|c|}\hline \text{页目录号（10位）}& \text{页表索引（10位）}& \text{页内偏移量（12位）}\\\hline \end{array}$
> 
> 请回答下列问题。
> 
> (1) 页和页框的大小各为多少字节？进程的虚拟地址空间大小为多少页？
> 
> (2) 假定页目录项和页表项均占 4 个字节，则进程的页目录和页表共占多少页？要求写出计算过程。
> 
> (3) 若某指令周期内访问的虚拟地址为 0100 0000H 和 0111 2048H，则进行地址转换时共访问多少个二级页表？要求说明坪由。
### 解
> [!done]+
> (1) 第一问。根据虚拟地址格式，页内偏移量占 12 位，计算机系统按字节编址，页大小为 $2^{12}$ ×1B=4KB，页框大小与页大小相同，为 4KB。
> 
> 第二问。根据虚拟地址格式，虚拟地址占 10+10+12=32 位，计算机系统按字节编址，进程的虚拟地址空间大小为 $2^{32}$ ×1B= $2^{32}$ B，页大小为 $2^{12}$ B，虚拟地址空间大小为 $\rm 2^{32}B/2^{12}B=2^{20}$ 页。或者页目录号占 10 位，有 $2^{10}$ 个页目录项，又页表索引占 10 位，每个页目录号下有 $2^{10}$ 个页表索引，总共有 $2^{10}\times2^{10}=2^{20}$ 个页表索引，所以进程的虚拟地址空间大小为 $2^{20}$ 页。
> 
> (2) 根据[[虚拟地址]]格式，页目录号占 10 位，有 $2^{10}$ 个页目录项，页目录项占 4B，页大小为 4KB，进程的页目录占 $2^{10}$ ×4B/4KB=1 页。又页表索引占 10 位，每个页目录号下有 $2^{10}$ 个页表索引，总共有 $2^{10}\times2^{10}=2^{20}$ 个页表索引，页表项占 4B，页大小为 4KB，[[进程]]的页表占 $2^{20}$ ×4B/4KB=1024 页。综上，进程的页目录和[[页表]]共占 1+1024=1025 页。
> 
> (3) $\begin{array}{|c|}\hline \text{页目录号（10位）}& \text{页表索引（10位）}& \text{页内偏移量（12位）}\\\hline \end{array}$ 等价于 $\begin{array}{|c|}\hline \text{一级页表页内偏移量（10位）}& \text{二级页表页内偏移量（10位）}& \text{页内偏移量（12位）}\\\hline \end{array}$ 。根据虚拟地址格式，因为虚拟地址 0100 0000H = $\underbrace{0000 0001 00}_{\text{页目录号}} \underbrace{00 0000 0000}_{\text{页表索引}}\underbrace{0000 0000 0000}_{\text{页内偏移量}}$ B 和 0111 2048H = $\underbrace{0000 0001 00}_{\text{页目录号}} \underbrace{01 0001 0010}_{\text{页表索引}}\underbrace{0000 0100 1000}_{\text{页内偏移量}}$ B 的页目录号都是 0000 0001 00B=4，所以进行地址转换时需访问一级页表的同一个页表项，对应同一个二级页表，即 4 号二级页表，两个虚拟地址在二级页表中的页表项不同。如下图所示：
> 
> ![](https://picx.zhimg.com/v2-aa6b73a2277436e0e97df4c96f023a65_r.jpg)
> 
> 综上，访问的虚拟地址为 0100 0000H 和 0111 2048H 共访问 1 个二级页表。