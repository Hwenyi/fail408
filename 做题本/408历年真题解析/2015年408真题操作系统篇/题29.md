---
publish: true
tags: 
aliases: 
finished: true
title: 题29
created: "2024-11-21 06:44"
updated: "2024-11-21 07:40"
---
## 题29
### 题目
> [!question]+
> 在文件的索引节点中存放直接索引指针 10 个，一级和二级索引指针各 1 个。磁盘块大小为 1KB，每个索引指针占 4 个字节。若某文件的索引节点已在内存中，则把该文件偏移量（按字节编址）为 1234 和 307400 处所在的磁盘块读入内存，需访问的磁盘块个数分别是（ ）。
> 
> A. 1、2
> 
> B. 1、3
> 
> C. 2、3
> 
> D. 2、4
### 解
> [!done]+
> 磁盘块大小为 1KB，每个索引指针占 4B，一个磁盘块可以装载 1KB/4B=256 个索引指针。
> 
> 直接索引视为 0 级索引。
> 
> $n_i$ 个 $i$ 级索引指向数据块大小为 $n_i\times 256^i\times 1\text{KB}$ 。
> 
> 访问 $i$ 级索引指向数据块需要读 $i$ 次索引，1 次数据块，总计 $i+1$ 次磁盘。
> 
> 10 个直接索引指向数据块大小为 10×1KB=10240B。首地址偏移量为 0，按字节编址，直接索引指向数据块偏移量范围为 [0, 10239]。
> 
> 1 个一级索引指向数据块大小为 1×256×1KB=262144B。首地址偏移量为 0，按字节编址，前面有直接索引指向数据块，一级索引指向数据块偏移量范围为 [10240, 10240+262143]，即 [10240, 272383]。
> 
> 1 个二级索引指向数据块大小为 1× $256^2$ ×1KB=67108864B。首地址偏移量为 0，按字节编址，前面有直接索引和一级索引指向数据块，二级索引指向数据块偏移量范围为 [10240+262144, 10240+262144+67108863]，即 [272384, 67381247]。
> 
> 因为偏移量为 1234∈[0, 10239]，所以该偏移量位于直接索引指向数据块范围内，访问该数据块需要读 1 次磁盘。
> 
> 因为偏移量为 307400∈[272384, 67381247]，所以该偏移量位于二级索引指向数据块范围内，访问该数据块需要读 3 次磁盘。
> 
> 本题选 B。
> 
> **_举一反三_**
> 
> 在文件的索引节点中存放直接索引指针 10 个，一级和二级索引指针各 1 个。磁盘块大小为 1KB，每个索引指针占 4 个字节。若某文件的索引节点已在内存中，则把该文件偏移量（按字节编址）为 10240 和 272384 处所在的磁盘块读入内存，需访问的磁盘块个数分别是（ ）。
> 
> A. 1、2
> 
> B. 1、3
> 
> C. 2、3
> 
> D. 2、4
> 
> 参考答案：C