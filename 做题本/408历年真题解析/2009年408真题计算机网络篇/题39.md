---
publish: true
tags: 
aliases: 
finished: true
title: 题39
created: "2024-11-21 06:38"
updated: "2024-11-21 07:40"
---
## 题39
### 题目
> [!question]+
> 一个 TCP 连接总是以 1 KB 的最大段长发送 TCP 段，发送方有足够多的数据要发送。当拥塞窗口为 16 KB 时发生了超时，如果接下来的 4 个 RTT（往返时间）时间内的 TCP 段的传输都是成功的，那么当第 4 个 RTT 时间内发送的所有 TCP 段都得到肯定应答时，拥塞窗口大小是（ ）。
> 
> A. 7 KB
> 
> B. 8 KB
> 
> C. 9 KB
> 
> D. 16 KB
### 解
> [!done]+
> 发送方维持一个拥塞窗口 (congestion window, cwnd)，拥塞窗口的大小取决于网络的拥塞程度，并且动态地变化。发送方让自己的发送窗口等于拥塞窗口。
> 
> 发送方控制拥塞窗口的原则是：只要网络没有出现拥塞，拥塞窗口就再增大一些，以便把更多的分组发送出去。但只要网络出现拥塞，拥塞窗口就减小一些，以减少注入到网络中的分组数。
> 
> 最大报文段长度 (maximum segment size, MSS) 是 TCP 协议的一个选项，用于在 TCP 连接建立时，收发双方协商通信时每一个报文段所能承载的最大数据长度（不包括报文段头）。
> 
> **慢开始算法：**开始时，将拥塞窗口设置为一个 MSS 的数值，每收到一个对新的报文段的确认后，把拥塞窗口增加至多一个 MSS 的数值。可以分析出，每经过一个传输轮次 (transmission round)，拥塞窗口大小加倍，逐渐增大到拥塞窗口的数值，一个传输轮次所经历的时间就是一个往返时间 RTT。
> 
> **拥塞避免算法：**每经过一个往返时间将发送方的窗口加 1。只要发送方判断网络出现拥塞，就将慢开始门限 ssthresh 设置为出现拥塞时发送方窗口值的一半，然后执行慢开始算法。
> 
> 在本题中，在 cwnd = 16 MSS 时出现超时，发送方判断网络出现拥塞，就将慢开始门限 ssthresh 设置为 cwnd/2 = 8 MSS，然后执行慢开始算法。重新设置 cwnd = 1 MSS。
> 
> 第一个 RTT 发送方得到肯定应答后，调整当前拥塞窗口大小为上一轮次拥塞窗口大小的两倍，即调整 cwnd = 2 MSS。
> 
> 第二个 RTT 发送方得到肯定应答后，调整当前拥塞窗口大小为上一轮次拥塞窗口大小的两倍，即调整 cwnd = 4 MSS。
> 
> 第三个 RTT 发送方得到肯定应答后，调整当前拥塞窗口大小为上一轮次拥塞窗口大小的两倍，即调整 cwnd = 8 MSS。此时 cwnd 到达慢开始门限 ssthresh 值，转而使用拥塞避免算法。
> 
> 第四个 RTT 发送方得到肯定应答后，调整当前拥塞窗口大小为上一轮次拥塞窗口大小加一，即调整 cwnd = 9 MSS。
> 
> 该过程示意图如下：
> 
> ![](https://pica.zhimg.com/v2-e651e438f3601657f46a41c22ab7be14_r.jpg)
> 
> 本题选 C。
> 
> **注意点**
> 
> 在掌握 TCP 的拥塞避免算法后，慢开始算法和拥塞避免算法的模拟其实并不能算是本题的难点，本题的难点在于对起止时刻的理解。
> 
> 首先是开始时刻，开始时刻是 16 KB 时发生了超时的时刻，此时是设置 cwnd = 1 并准备发送的时刻。这里开始时刻一定不能错误理解为 16 KB 发送时刻。
> 
> 然后是结束时刻，结束时刻是第四个 RTT 发送方得到肯定应答时，即第四个 RTT 结束后，第五个 RTT 开始时，一定不能理解为第四个 RTT 开始时刻。
> 
> 如果把开始时刻和结束时刻均理解错误，那么会错误计算出拥塞窗口大小是 4。
> 
> 如果正确理解开始时刻但错误理解结束时刻，或者错误理解开始时刻但正确理解结束时刻，那么会错误计算出拥塞窗口大小是 8，从而误选 B。
> 
> 所以 408 一定要注重审题。