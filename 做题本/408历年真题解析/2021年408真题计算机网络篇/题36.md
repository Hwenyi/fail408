---
publish: true
tags: 
aliases: 
finished: true
title: 题36
created: "2024-11-21 07:26"
updated: "2024-11-21 07:40"
---
## 题36
### 题目
> [!question]+
> 若路由器向 MTU = 800 B 的链路转发一个总长度为 1580 B 的 IP 数据报（首部长度为 20 B）时，进行了分片，且每个分片尽可能大，则第 2 个分片的总长度字段和 MF 标志位的值分别是（ ）。
> 
> A. 796，0
> 
> B. 796，1
> 
> C. 800，0
> 
> D. 800，1
### 解
> [!done]+
> 在本题中，IP 数据报总长度为 1580 字节（首部长度为 20 B），大于 MTU = 800 B，所以需要分片。
> 
> 分片先去除原来的 IP 分组的头的 20 B，对数据载荷 1580 B - 20 B = 1560 B 进行分片，分片后每个分片的数据载荷不能超过 800 B -20 B = 780 B，且要求是 8 B 的整数倍（片偏移字段以 8 B 为单位）。
> 
> 最大 IP 分片封装数据的字节数为 $\lfloor 780\text{ B}/8\rfloor\times 8 = 776 \text{ B}$ 。至少需要分为 $\lceil 1560\text{ B}/776 \text{ B}\rceil=3$ 个分片。
> 
> 第二个分片不是最后一个分片，可以继续封装 776B 的数据载荷，加上首部长度为 20 B，总长度为 776B+20B=796B，总长度字段以字节为单位，所以第 2 个分片的总长度字段为 776。第二个分片不是最后一个分片，也意味着后面还有分片，更多分片 (more fragment) 为真，MF (more fragment) 标志位为 1。
> 
> 本题选 B。