---
publish: true
tags: 
aliases: 
finished: true
title: 题21
created: "2024-11-21 07:26"
updated: "2024-11-21 07:40"
---
## 题21
### 题目
> [!question]+
> 异常事件在当前指令执行过程中进行检测，中断请求则在当前指令执行后进行检测。下列事件中。下列事件中，相应处理程序执行后，必须回到当前指令重新执行的是（ ）。
> 
> A. 系统调用
> 
> B. 页缺失
> 
> C. DMA 传送结束
> 
> D. 打印机缺纸
### 解
> [!done]+
> 方法一：选项分析
> 
> [[系统调用]]是[[用户程序]]请求[[操作系统]]提供某些特定功能或服务的一种机制。系统调用完成后，会返回到下一条[[指令]]继续执行。A 错误。
> 
> [[缺页|页缺失]]指的是在[[虚拟内存]]管理中，当程序访问的页面不在主存中时发生的事件。当发生页缺失时，当前[[指令]]会**被暂停执行**，并触发缺页[[中断]]。操作系统会根据[[缺页]][[中断处理程序]]进行[[页面调度]]和加载，处理完成后，必须**回到当前指令重新执行**。B 正确。
> 
> 当 [[DMA]] 传送结束时，一般会产生一个[[中断]][[信号]]来通知 [[CPU]] 来进行**后处理**。[[中断处理程序]]会执行相应的操作，完成后**返回到下一条**[[指令]]继续执行。C 错误。
> 
> 打印机缺纸事件是指打印任务进行中，打印机的纸张用尽的情况。在这种情况下，打印操作会被暂停，并触发适当的处理程序来处理缺纸事件。处理程序执行后，通常不需要回到当前指令重新执行，而是可以继续执行下一条指令或其他任务。D 错误。
> 
> 本题选 B。
> 
> 方法二：异常分类
> 
> 外部异常（外[[中断]]）指来自 CPU 执行指令外部的事件，一般是指由计算机外设发出的中断请求。如设备发出的 I/O 结束中断、时钟中断。
> 
> 内部[[异常]]（内中断）指来自 CPU 执行指令内部的事件，可分为故障 (fault)、自陷 (trap) 和终止 (abort)。
> 
> [[故障]]通常是由[[指令]]执行引起的[[异常]]，如非法操作码、缺页[[故障]]、除数为 0、运算溢出等。
> 
> 自陷是一种为预先安排的事件，为自愿中断，用于在用户态下调用操作系统内核程序，如条件[[陷阱]]指令。
> 
> [[终止]]时指出现了 CPU 无法继续执行的硬件故障，如控制器出错、存储器校验错误。
> 
> $$\begin{array}{|c|c|c|c|}\hline \text{类别}&\text{子类别}&\text{产生原因}&\text{同步/异步}&\text{返回行为}\\\hline \text{外部异常（外中断）}&\text{-}&\text{来自 I/O 设备的信号}&\text{异步}&\text{总是返回到下一条指令}\\\hline &\text{陷阱}&\text{有意的异常}&\text{同步}&\text{总是返回到下一条指令}\\ \text{内部异常（内中断）}&\text{故障}&\text{潜在可恢复的错误}&\text{同步}&\text{可能返回到当前指令}\\ &\text{终止}&\text{不可恢复的错误}&\text{同步}&\text{不会返回}\\\hline \end{array}$$
> 
> [[系统调用]]属于自陷，返回到下一条指令继续执行。A 错误。
> 
> 页缺失属于[[故障]]，会返回到当前指令重新执行。B 正确。
> 
> [[DMA]]传送结束[[IO接口|设备接口]]会向 CPU 发送 DMA 结束[[信号]]，交还总线控制权，属于外部[[异常]]，返回到下一条[[指令]]继续执行。C 错误。
> 
> 打印机缺纸属于外部[[异常]]，返回到下一条指令继续执行。D 错误。
> 
> 本题选 B。
> 
> 评：中断和异常的定义有很多版本，考试时以题目的定义为准。