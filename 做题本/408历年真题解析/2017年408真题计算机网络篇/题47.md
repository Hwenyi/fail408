---
publish: true
tags: 
aliases: 
finished: true
title: 题47
created: "2024-11-21 07:17"
updated: "2024-11-21 07:40"
---
## 题47
### 题目
> [!question]+
> （9 分）
> 
> 甲乙双方均采用后退 N 帧协议 (GBN) 进行持续的双向数据传输，且双方始终采用捎带确认，帧长均为 1000 B。 $S_{x,y}$ 和 $R_{x,y}$ 分别表示甲方和乙方发送的数据帧，其中：x 是发送序号；y 是确认序号（表示希望接收对方的下一帧序号）；数据帧的发送序号和确认序号字段均为 3 比特。信道传输速率为 100 Mbps，RTT = 0.96 ms。下图给出了甲方发送数据帧和接收数据帧的两种场景，其中 $t_0$ 为初始时刻，此时甲方的发送和确认序号均为 0， $t_1$ 时刻甲方有足够多的数据待发送。
> 
> ![](https://pica.zhimg.com/v2-cb22ff5c914f75e2ae17a1c42423d2ac_r.jpg)
> 
> 请回答下列问题。
> 
> (1) 对于图 (a)， $t_0$ 时刻到 $t_1$ 时刻期间，甲方可以断定乙方已正确接收的数据帧数是多少？正确接收的是哪几个帧（请用 $S_{x,y}$ 形式给出）？
> 
> (2) 对于图 (a)，从 $t_1$ 时刻起，甲方在不出现超时且未收到乙方新的数据帧之前，最多还可以发送多少个数据帧？其中第一个帧和最后一个帧分别是哪个（请用 $S_{x,y}$ 形式给出）？
> 
> (3) 对于图 (b)，从 $t_1$ 时刻起，甲方在不出现新的超时且未收到乙方新的数据帧之前，需要重发多少个数据帧？重发的第一个帧是哪个（请用 $S_{x,y}$ 形式给出）？
> 
> (4) 甲方可以达到的最大信道利用率是多少？
### 解
> [!done]+
> 采用后退 N 帧协议 (GBN)，发送窗口大小 $W_T$ 满足 $1<W_T\le 2^n-1$ ，接受窗口大小 $W_R$ 满足 $W_R=1$ 。其中 $n$ 是帧序号的比特数。将 $n=3$ 代入， $1<W_T\le 7$ 。发送窗口最大为 7。可以有 $2^3=8$ 个帧序号，即帧编号 0 ~ 7。
> 
> (1) 对于图 (a)。
> 
> 第一问。$t_0$ 时刻到 $t_1$ 时刻期间，根据乙发送最后一个帧 $R_{3,3}$ ，表示乙希望甲发送 3 号帧，后退 N 帧协议 (GBN) 为累积确认，表明乙已经正确接收甲发送的 0~2 号帧，t0 时刻到 t 时刻期间，甲方可以断定乙方已正确接收了 3 个数据帧。
> 
> 第二问。此时甲已经发送 $S_{0,0},S_{1,0},S_{2,0},S_{3,0}$ 和 $S_{4,1}$ ，甲发送的 0~2 号帧对应 $S_{0,0},S_{1,0},S_{2,0}$ ，即正确接收的是 $S_{0,0},S_{1,0},S_{2,0}$ 。
> 
> (2) 对于图 (a)。
> 
> 第一问。甲的发送窗口最大为 7，在 $t_1$ 时刻前，甲已经发送 $S_{0,0},S_{1,0},S_{2,0},S_{3,0}$ 和 $S_{4,1}$ 共计 5 个数据帧，其中乙方已正确接收了 3 个数据帧，还剩 2 个数据帧情况未知，这 2 个帧序号依次是 3、4，甲可以将发送窗口中的剩余 7-2=5 个帧全部发送出去，即从 $t_1$ 时刻起，甲方最多还可以发送 5 个数据帧，这 5 个帧序号依次是 5、6、7、0、1。
> 
> 如下图所示：
> 
> ![](https://pic3.zhimg.com/v2-dbded9c0e4d67d53a574f6e68620b6b4_r.jpg)
> 
> 第二问。甲收到乙发来的 $R_{0,1},R_{1,3},R_{3,3}$ ，即乙发来的 0、1、3 号帧，其中 $S_{4,1}$ 对 $R_{0,1}$ 进行了确认，即乙发来的 0 号帧已经被确认，剩余 1、3 号帧需要确认，因为后退 N 帧协议 (GBN) 为累积确认，3 号帧没有按序发送，所以甲正确接收乙发来的 1 号帧，希望接收乙发来的 2 号帧，所以甲方在不出现超时且未收到乙方新的数据帧之前，可以发送的数据帧为 $S_{5,2},S_{6,2},S_{7,2},S_{0,2},S_{1,2}$ 。其中第一个帧是 $S_{5,2}$ ，最后一个帧是 $S_{1,2}$ 。
> 
> (3) 对于图 (b)。
> 
> 第一问。在 $t_1$ 时刻前，甲已经发送 $S_{0,0},S_{1,0},S_{2,0},S_{3,2}$ 和 $S_{4,2}$ 共计 5 个数据帧，表明甲发送了 0~5 号数据帧，最后收到乙发送的 $R_{2,2}$ 数据帧，表明乙已经正确接收甲发送的 0~1 号数据帧，希望接收甲发送的 2 号数据帧，因为 $S_{2,0}$ 超时，需要发送出错帧及其之后的帧，即甲需要重传 2~4 号数据帧，即从 $t_1$ 时刻起，甲方在不出现新的超时且未收到乙方新的数据帧之前，需要重发 3 个数据帧。
> 
> 第二问。 $t_1$ 时刻前，甲已经正确接收 $R_{2,2}$ ，即乙发来的 2 号数据帧，希望接收乙发来的 3 号数据帧，甲需要重传 2~4 号数据帧，第一个需要重传的是 2 号数据帧，因此，甲重发的第一个帧是 $S_{2,3}$ 。
> 
> (4) 本题支持持续的双向数据传输。
> 
> 从发送方发送一个数据帧到发送方接收到接收方传来的确认帧为一个周期。信道利用率为一个周期内发生数据的时间占该周期的比例。
> 
> 甲发送一个数据帧的时延为 $t_1 =\frac{\text{数据帧长}}{\text{信道带宽}} = \frac{1000 \text{ B}}{100\text{ Mbps}}=\frac{1000\times8 \text{ bit}}{100\times 10^6\text{ bit/s}}=0.08\text{ ms}$ ，经过一个 RTT = 0.96 ms，乙采用等长的数据帧进行捎带确认，接收乙发送一个数据帧的时延为 $t_2=t_1=0.08\text{ ms}$ 。一个周期 $T=t_1+\text{RTT}+t_2= 1.12\text{ ms}$ 。
> 
> 在一个周期内，甲可以将发送窗口中的 7 个数据帧全部发送出去，因此甲的最大信道利用率 $U=\frac{7t_1}{T}= 50\%$ 。