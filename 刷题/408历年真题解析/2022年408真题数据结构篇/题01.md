---
publish: true
tags: 
aliases: 
finished: true
title: 题01
created: "2024-11-21 07:27"
updated: "2024-11-21 07:40"
---
## 题01
### 题目
> [!question]+
> 下列程序段的时间复杂度是（ ）。
> 
> ```cpp
> int sum = 0;
> for (int i = 1; i < n; i *= 2) 
>     for (int j = 0; j < i; j++) 
>         sum++;
> ```
> 
> A. $O(\log n)$
> 
> B. $O(n)$
> 
> C. $O(n\log n)$
> 
> D. $O(n^2)$
### 解
> [!done]+
> **方法一：定义法**
> 
> 本题为多层循环中嵌套循环指针相关类型题，且指针变化非线性，所以只能用定义法求解，程序主要代价为 sum++，这里统计 sum++ 的执行次数，用 $k$ 表示外层循环的迭代轮次，设 $k$ 的最大值为 $l$ ，则
> 
> 对于外层循环的 $i$ ：
> 
> 第一次迭代有 $i=1=2^{0}=2^{1-1}$ ；
> 
> 第 $k$ 次迭代有 $i=2^{k-1}$ ；
> 
> 最后一次迭代有 $i=2^{l-1}<n$ ，其中 $l=\max\{k:2^{k-1}<n\}=\max\{k:2^{k-1}\le n-1\}$ ，即 $l$ 为满足 $2^{l-1}\le n-1$ 的最大整数，推出 $l= \lfloor\log (n-1)\rfloor+1$ ，此时 $i=2^{\lfloor\log (n-1)\rfloor}$ 。
> 
> 对于内层循环的 $j$ ：
> 
> 第一次迭代有 $j=0$ ；
> 
> 最后一次迭代有 $j=i-1=2^{k-1}-1$ 。
> 
> 综上，推出如下计算式：
> 
> $\begin{aligned} \sum_{k=1}^{\lfloor\log (n-1)\rfloor+1}\sum_{j=0}^{2^{k-1}-1}{1} &=\sum_{k=1}^{\lfloor\log (n-1)\rfloor+1}2^{k-1}\\ &=\frac{1-2^{\lfloor\log (n-1)\rfloor+1}}{1-2}\\ &=2^{\lfloor\log (n-1)\rfloor+1}-1\\ &\le2^{\log (n-1)+1}-1\\ &=2\cdot2^{\log (n-1)}-1\\ &=2(n-1)-1\\& =2n-3\\ &=O(n) \end{aligned}$
> 
> 本题选 **B**。
> 
> 由于这里用到了不等式运算，所以涉及 $O$ 的定义：描述渐近上界，给定函数 $g(n)$ , $O(g(n)) = \{f(n):\exists c>0,n_0> 0[\forall n\geq n_0[0\leq f(n)\leq cg(n)]]\}$ 。
> 
> $f(n)\in O(g(n))$ 一般书写为 $f(n)= O(g(n))$ ，计算可转化为 $f(n)\leq cg(n)$ 。
> 
> 同时涉及取整符号性质：
> 
> $x-1<\lfloor x \rfloor \leq x \leq \lceil x \rceil < x+1\quad x\in \mathbb{R}$
> 
> 一般情况下，取整计算不会渐近改变算法的时间复杂度，所以我们可以直接去掉取整符号，或者将 $n-1$ 视为 2 的自然数次幂，上面的计算可以简化为
> 
> $\begin{aligned} \sum_{k=1}^{\log (n-1)+1}\sum_{j=0}^{2^{k-1}-1}{1} &=\sum_{k=1}^{\log (n-1)+1}2^{k-1}\\ &=\frac{1-2^{\log (n-1)+1}}{1-2}\\ &=2^{\log (n-1)+1}-1\\ &=2\cdot2^{\log (n-1)}-1\\ &=2(n-1)-1\\& =2n-3\\ &=O(n) \end{aligned}$
> 
> 结果不变。
> 
> 注：参考《算法导论》相关章节如下：
> 
> - [算法导论（第四版）第三章：描述运行时间　第二节：渐近标记的定义](https://zhuanlan.zhihu.com/p/542281533)
> - [算法导论（第四版）第三章：描述运行时间　第三节：标准记号与常用函数](https://zhuanlan.zhihu.com/p/542302368)
> 
> **方法二：枚举**
> 
> 对于没有学习过算法导论的同学来说，方法一显然超纲了，但是并非没有办法，我们可以枚举 $n=1,2,\dots$
> 
> $\begin{array}{c|c} n&i&j&sum\\\hline 1&\emptyset&\emptyset&0\\ 2&\{1\}&\{\{0\}\}&1\\ 3&\{1,2\}&\{\{0\},\{0,1\}\}&3\\ 4&\{1,2\}&\{\{0\},\{0,1\}\}&3\\ 5&\{1,2,4\}&\{\{0\},\{0,1\},\{0,1,2,3\}\}&7\\ 6&\{1,2,4\}&\{\{0\},\{0,1\},\{0,1,2,3\}\}&7\\ 7&\{1,2,4\}&\{\{0\},\{0,1\},\{0,1,2,3\}\}&7\\ 8&\{1,2,4\}&\{\{0\},\{0,1\},\{0,1,2,3\}\}&7\\ 9&\{1,2,4,8\}&\{\{0\},\{0,1\},\{0,1,2,3\},\{0,1,2,3,4,5,6,7,8\}\}&15\\ 10&\{1,2,4,8\}&\{\{0\},\{0,1\},\{0,1,2,3\},\{0,1,2,3,4,5,6,7,8\}\}&15\\ 11&\{1,2,4,8\}&\{\{0\},\{0,1\},\{0,1,2,3\},\{0,1,2,3,4,5,6,7,8\}\}&15\\ 12&\{1,2,4,8\}&\{\{0\},\{0,1\},\{0,1,2,3\},\{0,1,2,3,4,5,6,7,8\}\}&15\\ 13&\{1,2,4,8\}&\{\{0\},\{0,1\},\{0,1,2,3\},\{0,1,2,3,4,5,6,7,8\}\}&15\\ 14&\{1,2,4,8\}&\{\{0\},\{0,1\},\{0,1,2,3\},\{0,1,2,3,4,5,6,7,8\}\}&15\\ 15&\{1,2,4,8\}&\{\{0\},\{0,1\},\{0,1,2,3\},\{0,1,2,3,4,5,6,7,8\}\}&15\\ 16&\{1,2,4,8\}&\{\{0\},\{0,1\},\{0,1,2,3\},\{0,1,2,3,4,5,6,7,8\}\}&15\\ \vdots&\vdots&\vdots&\vdots \end{array}$
> 
> 有
> 
> $\begin{aligned} sum&\le 2n-3\\&=O(n) \end{aligned}$
> 
> 这道题难度非常大，原则上只能用定义法。归根结底基础还是要打扎实，用定义法求解永远不会出错。
> 
> 更多解题技巧请参考本人归纳总结：[408 高频考点：时间复杂度](https://zhuanlan.zhihu.com/p/550684780)。