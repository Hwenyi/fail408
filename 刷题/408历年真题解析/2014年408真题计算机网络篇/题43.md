---
publish: true
tags: 
aliases: 
finished: true
title: 题43
created: "2024-11-21 06:44"
updated: "2024-11-21 07:40"
---
## 题43
### 题目
> [!question]+
> （9 分）
> 
> ![](https://pic1.zhimg.com/v2-aa6ef82a9e8a94f0bbb19f6c89e25faa_r.jpg)
> 
> 请根据题 42 描述的网络，继续回答下列问题。
> 
> (1) 假设路由表结构如下表所示，请给出题 42 图中 R1 的路由表，要求包括到达题 42 图中子网 192.1.x.x 的路由，且路由表中的路由项尽可能少。
> 
> (2) 当主机 192.1.1.130 向主机 192.1.7.211 发送一个 TTL=64 的 IP 分组时，R1 通过哪个接口转发该 IP 分组？主机 192.1.7.211 收到的 IP 分组 TTL 是多少？
> 
> (3) 若 R1 增加一条 Metric 为 10 的链路连接 Internet，则题 42 表中 R1 的 LSI 需要增加哪些信息？
### 解
> [!done]+
> (1) 根据题 42 图，可以分析 R1 到达各个子网的路由
> 
> 目的网络 192.1.1.0/24，为 R1 的直连网络，通过接口 E0 进行转发。
> 
> 目的网络 192.1.5.0/24，使用 OSPF 路由选择协议，选择费用最短的路径，即 R1→R3→192.1.5.0/24，下一跳为 R3 地址为 10.1.1.10 的接口，通过接口 L1 进行转发。
> 
> 目的网络 192.1.6.0/24，使用 OSPF 路由选择协议，选择费用最短的路径，即 R1→R2→192.1.6.0/24，下一跳为 R2 地址为 10.1.1.2 的接口，通过接口 L0 进行转发。
> 
> 目的网络 192.1.7.0/24，使用 OSPF 路由选择协议，选择费用最短的路径，即 R1→R2→192.1.7.0/24，下一跳为 R2 地址为 10.1.1.2 的接口，通过接口 L0 进行转发。
> 
> 可写出 R1 的路由表如下：
> 
> <table data-draft-node="block" data-draft-type="table" data-size="normal" data-row-style="normal"><tbody><tr><td>目的网络</td><td>下一跳</td><td>接口</td></tr><tr><td>192.1.1.0/24</td><td>-</td><td>E0</td></tr><tr><td>192.1.5.0/24</td><td>10.1.1.10</td><td>L1</td></tr><tr><td>192.1.6.0/24</td><td>10.1.1.2</td><td>L0</td></tr><tr><td>192.1.7.0/24</td><td>10.1.1.2</td><td>L0</td></tr></tbody></table>
> 
> 由于路由表中的路由项尽可能少，需要进行路由聚合，将下一跳地址相同的项进行聚合，即表中最后两项，将子网 192.1.6.0/24 和 192.1.7.0/24 进行聚合。
> 
> 路由聚合可以找出需要聚合的网络的最长公共网络前缀。
> 
> 将 192.1.6.0/24 和 192.1.7.0/24 低 16 位写成二进制形式，其中主机号部分用的位用 x 表示，每个 x 可以取 0 或 1。二进制位用红色表示。得到 $\rm 192.1.\color{red}{00000110}.\color{red}{xxxxxxxx}$ 和 $\rm 192.1.\color{red}{00000111}.\color{red}{xxxxxxxx}$ 。聚合后得到子网为 $\rm 192.1.\color{red}{0000011x}.\color{red}{xxxxxxxx}$ 。前 23 位为网络号，主机号位全部取 0 得到网络地址 $\rm 192.1.\color{red}{00000110}.\color{red}{00000000}$ ，即 192.1.6.0。
> 
> 因此，聚合后的网络为即 192.1.6.0/23。
> 
> 最终可写出 R1 的路由表如下：
> 
> <table data-draft-node="block" data-draft-type="table" data-size="normal" data-row-style="normal"><tbody><tr><td>目的网络</td><td>下一跳</td><td>接口</td></tr><tr><td>192.1.1.0/24</td><td>-</td><td>E0</td></tr><tr><td>192.1.5.0/24</td><td>10.1.1.10</td><td>L1</td></tr><tr><td>192.1.6.0/23</td><td>10.1.1.2</td><td>L0</td></tr></tbody></table>
> 
> (2) 第一问。主机 192.1.1.130 属于子网 192.1.1.0/24，主机 192.1.7.211 属于子网 192.1.7.0/24，当主机 192.1.1.130 向主机 192.1.7.211 发送一个 TTL=64 的 IP 分组时，使用 OSPF 路由选择协议，选择费用最短的路径，即 192.1.1.130→R1→R2→R4→192.1.7.211，R1 通过 L0 转发该 IP 分组。
> 
> 第二问。每经过一个路由器，TTL 值就会减 1，该传输路径中要经过 3 个路由器，所以主机 192.1.7.211 收到该 IP 分组时，TTL = 64 - 3 = 61。
> 
> (3) R1 连接 Internet 需要增加一条默认路由，即 0.0.0.0/0。所以题 42 表中 R1 的 LSI 需要增加一项的网络前缀 Prefix 为 0.0.0.0/0，度量 Metric 为 10。