---
publish: true
tags: 
aliases: 
finished: true
title: 题47
created: "2024-11-21 07:27"
updated: "2024-11-21 07:40"
---
## 题47
### 题目
> [!question]+
> （9 分）
> 
> 某网络拓扑如题 47 图所示，R 为路由器，S 为以太网交换机，AP 是 802.11 接入点，路由器的 E0 接口和 DHCP 服务器的 IP 地址配置如图中所示：H1 与 H2 属于同一个广播域，但不属于同一个冲突域；H2 和 H3 属于同一个冲突域；H4 和 H5 已经接入网络，并通过 DHCP 动态获取了 IP 地址。现有路由器、100BaseT 以太网交换机和 100BaseT 集线器 (Hub) 三类设备各若干台。
> 
> ![](https://pic3.zhimg.com/v2-bdc74ca4227ea0f234ba8a5d50652b68_r.jpg)
> 
> 请回答下列问题。
> 
> (1) 设备 1 和设备 2 应该分别选择哪类设备？
> 
> (2) 若信号传播速度为 $2\times10^8$ m/s，以太网最小帧长为 64B。信号通过设备 2 时会产生额外的 1.51 μs 的时间延迟，则 H2 与 H3 之间可以相距的最远距离是多少？
> 
> (3) 在 H4 通 DHCP 动态获取 IP 地址过程中，H4 首先发送了 DHCP 报文 M，M 是哪种 DHCP 报文？路由器 E0 接口能否收到封装 M 的以太网帧？S 向 DHCP 服务器转发的封装 M 的以太网帧的目的 MAC 地址是什么？
> 
> (4) 若 H4 向 H5 发送一个 IP 分组 P，则 H5 收到的封装 P 的 802.11 帧的地址 1、地址 2 和地址 3 分别是什么？
### 解
> [!done]+
> (1) 因为 H1 与 H2 属于同一个[[广播域]]，但不属于同一个[[冲突域]]，路由器、100BaseT 以太网交换机和 100BaseT 集线器 (Hub) 中只有 [[100BASE-T]] 以太网交换机可以隔离冲突域但不能隔离广播域，因此设备 1 是 100BaseT 以太网交换机。
> 
> 因为 H2 和 H3 属于同一个冲突域，路由器、100BaseT 以太网交换机和 100BaseT 集线器 (Hub) 中只有 100BaseT 集线器 (Hub) 无法隔离[[冲突域]]，因此设备 2 是 100BaseT 集线器 (Hub)。
> 
> 综上所述，设备 1 应该选择 100BaseT 以太网交换机，设备 2 应该选择 100BaseT 集线器。
> 
> (2) 因为 H2 和 H3 属于同一个冲突域，可知使用的是支持[[半双工]]的 [[CSMA-CD协议的基本原理|CSMA/CD]] 协议。[[100BASE-T]] 以太网[[交换机]]的数据传输速率为 100Mbps。
> 
> 争用期 $2\tau$ = 以太网最小帧长 / 数据传输速率 = $\frac{64\text{ B}}{100 \text{ Mbps}} = \frac{64\times8\text{ bit}}{100 \times10^6\text{ bit/s}} =5.12\text{ μs}$ 。争用期是冲突域内相距最远的两个站点的往返时延，因此单程最大时延 $\tau = 2\tau/2 = 5.12\text{ μs}/2 = 2.56\text{ μs}$ 。其中包括信号通过设备 2 时会产生额外的 1.51 μs 的时间延迟，单程在以太网中的最大传播时延为 2.56 μs-1.51 μs = 1.05 μs。
> 
> 两个站点相距的最远距离 = 单程在以太网中的最大传播时延 × 信号传播速度 = 1.05 μs × $2\times10^8$ m/s = 210 m。
> 
> 假设 H2 和 H3 为冲突域内相距最远的两个站点，H2 与 H3 之间可以相距的最远距离是 210 m。
> 
> (3) 第一问。在 H4 通 DHCP 动态获取 IP 地址过程中，H4 首先发送了 DHCP 发现报文（DISCOVER 报文），因此 M 是 DHCP 发现报文（DISCOVER 报文）。
> 
> 第二问。H4、H5、AP、DHCP 服务器、交换机 S、路由器接口 E0 处于同一个子网中，即位于一个广播域内，因为 DHCP 发现报文是以广播帧的形式发送，所以与 H4 处于同一个广播域的站点均能接受到该 DHCP 发现报文，因此路由器 E0 接口能收到封装 M 的以太网帧。
> 
> 第三问。因为是 DHCP 发现报文是广播帧，所以目的 MAC 地址位全 1，即 ff-ff-ff-ff-ff-ff。因此，S 向 DHCP 服务器转发的封装 M 的以太网帧的目的 MAC 地址是 ff-ff-ff-ff-ff-ff。
> 
> (4) 本题考察 IEEE 802.11 数据帧的格式。
> 
> IEEE 802.11 数据帧的格式如下：
> 
> ![](https://pic1.zhimg.com/v2-b5ab967578e9bd6b06c8962eb217cbe4_r.jpg)
> 
> [[802.11无线局域网|802.11]] 数据帧最特殊的地方就是有四个地址字段。地址 4 用于自组网络。本题考察前三个地址。这三个地址的内容取决于帧控制字段中的 “去往 AP”（发送到接入点）和 “来自 AP”（从接入点发出）这两个字段的数值。这两个子字段各占 1 位，合起来有 4 种组合，用于定义 802.11 帧中的几个地址字段的含义。
> 
> 下表给出了 802.11 帧的地址字段最常用的两种情况（在右基础设施的网络中只使用前三种地址，而不使用仅在自组移动网络最后使用的地址 4）。
> 
> <table data-draft-node="block" data-draft-type="table" data-size="normal" data-row-style="normal"><tbody><tr><td>去往 AP</td><td>来自 AP</td><td>地址 1</td><td>地址 2</td><td>地址 3</td><td>地址 4</td></tr><tr><td>0</td><td>1</td><td>目的地址</td><td>AP 地址</td><td>源地址</td><td>-</td></tr><tr><td>1</td><td>0</td><td>AP 地址</td><td>源地址</td><td>目的地址</td><td>-</td></tr></tbody></table>
> 
> 根据题意，数据帧是从 H4 通过 AP 转发给 H5，因此 H5 收到的数据帧来自 AP，因此
> 
> 地址 1 是目的 MAC 地址，即 H5 的 MAC 地址 00-11-11-11-11-E1。
> 
> 地址 2 是 AP 地址，即图中 AP 的 MAC 地址 00-11-11-11-11-C1。
> 
> 地址 3 是源 MAC 地址，即 H4 的 MAC 地址 00-11-11-11-11-D1。