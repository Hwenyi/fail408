---
publish: true
tags: []
aliases: 
finished: true
title: 题45
created: "2024-11-21 07:32"
updated: "2024-12-14 07:21"
---
## 题45
### 题目
> [!question]+
> （本题 7 分）
> 
> 某计算机按字节编址，采用页式虚拟存储管理方式，虚拟地址和物理地址长度均为32位，页表项的大小为4字节，页大小为4MB，虚拟地址结构如下：
> 
> $$
> \begin{array}{|c|c|}
> \hline
> \text{页号（10 位）} & \text{页内偏移量（22 位）} \\
> \hline
> \end{array}
> $$
> 
> 进程 P 的页表起始虚拟地址为 B8C0 0000 H，被装载到从物理地址 6540 0000 H 开始的连续主存空间中。
> 
> 请回答下列问题，要求答案用十六进制表示。
> 
> (1) 若 CPU 在执行进程 P 的过程中，访问虚拟地址 1234 5678 H 时发生了缺页异常，经过缺页异常处理和 MMU 地址转换后得到的物理地址是 BAB4 5678 H，在此次缺页异常处理过程中，需要为所缺页分配页框并更新相应的页表项，则该页表项的虚拟地址和物理地址分别是什么？该页表项的页框号更新后的值是什么？（3 分）
> 
> (2) 进程 P 的页表所在页的页号是多少？该页对应的页表项的虚拟地址是多少？该页表项中的页框号是多少？（4 分）
### 解
> [!done]+
> (1) 第一问。该页表项的虚拟地址是 B8C0 0120 H，物理地址是 65400120 H。
> 
> 已知虚拟地址和物理地址长度均为 32 位，虚拟地址结构如下。
> 
> <table data-draft-node="block" data-draft-type="table" data-size="normal" data-row-style="normal"><tbody><tr><td>页号（10 位）</td><td>页内偏移量（22 位）</td></tr></tbody></table>
> 
> 虚拟地址 1234 5678 H = $\underbrace{0001 0010 00}_{\text{页号}}\underbrace{11 0100 0101 0110 0111 1000}_{\text{页内偏移量}}\ {\rm B}$ ，页号 0001001000 B= 48 H，也就是要访问页表的 48 H 号项，页表起始虚拟地址为 B8C0 0000 H，即页表 0 号项虚拟地址为 B8C0 0000 H，计算机按字节编址，页表项的大小为 4 字节，每项占 4 个地址单元。可得页表的 48 H 号项的虚拟地址为 B8C0 0000 H + 48 H × 4 = B8C0 0000 H + 48 H << 2 = B8C0 0120 H。因为该页表被装载到的主存空间连续，页表起始虚拟地址为 B8C0 0000 H 对应的物理地址为 6540 0000 H，页表的 48 H 号项的物理地址为 6540 0000 H + 48 H × 4 = 6540 0000 H + 48 H << 2 = 6540 0120 H。
> 
> 示意表如下。
> 
> <table data-draft-node="block" data-draft-type="table" data-size="normal" data-row-style="normal"><tbody><tr><td>页表项号</td><td>页表项虚拟地址</td><td>页表项物理地址</td></tr><tr><td>0 H</td><td>B8C0 0000 H</td><td>6540 0000 H</td></tr><tr><td>1 H</td><td>B8C0 0004 H</td><td>6540 0004 H</td></tr><tr><td>…</td><td>…</td><td>…</td></tr><tr><td>48 H</td><td>B8C0 0120 H</td><td>6540 0120 H</td></tr><tr><td>…</td><td>…</td><td>…</td></tr></tbody></table>
> 
> 第二问。该页表项的页框号更新后的值是 2EA H。
> 
> 虚拟地址和物理地址长度均为 32 位，已知虚拟地址结构，推出物理地址结构如下。
> 
> <table data-draft-node="block" data-draft-type="table" data-size="normal" data-row-style="normal"><tbody><tr><td>页框号（10 位）</td><td>页内偏移量（22 位）</td></tr></tbody></table>
> 
> 经过缺页异常处理和 MMU 地址转换后得到的物理地址是 BAB4 5678 H = $\underbrace{1011 1010 10}_{\text{页框号}}\underbrace{11 0100 0101 0110 0111 1000}_{\text{页内偏移量}}\ {\rm B}$ 。页框号 10 1110 1010 B = 2EA H。
> 
> (2) 第一问。进程 P 的页表所在页的页号是 2E3 H。
> 
> 进程 P 的页表起始虚拟地址为 B8C0 0000 H = $\underbrace{1011 1000 11}_{\text{页号}}\underbrace{00 0000 0000 0000 0000 0000}_{\text{页内偏移量}}\ {\rm B}$ ，页号 10 1110 0011 B = 2E3 H。
> 
> 第二问。该页对应的页表项的虚拟地址是 B8C0 0B8C H。
> 
> 页表起始虚拟地址为 B8C0 0000 H，即页表 0 号项虚拟地址为 B8C0 0000 H，计算机按字节编址，页表项的大小为 4 字节，每项占 4 个地址单元。可得页表的 2E3 H 号项的虚拟地址为 B8C0 0000 H + 2E3 H × 4 = B8C0 0000 H + 2E3 H << 2 = B8C0 0B8C H。
> 
> 第三问。该页表项中的页框号是 195 H。
> 
> 因为该页表被装载到的主存空间连续，页表起始虚拟地址为 B8C0 0000 H 对应的物理地址为 6540 0000 H，页表项的大小为 4 字节，每项占 4 个地址单元。页表的 2E3 H 号项的物理地址为 6540 0000 H + 2E3 H × 4 = 6540 0000 H + 2E3 H << 2 = 6540B8C H。6540 0B8C H = $\underbrace{0110 0101 01}_{\text{页框号}}\underbrace{00 0000 0000 1011 1000 1100}_{\text{页内偏移量}}\ {\rm B}$ 。页框号 01 1001 0101 B = 195 H。