---
publish: true
tags: 
aliases: 
finished: true
title: 题47
created: "2024-11-21 06:44"
updated: "2024-11-21 07:40"
---
## 题47
### 题目
> [!question]+
> （9 分）
> 
> 某网络拓扑如题 47 图所示，其中路由器内网接口、DHCP 服务器、WWW 服务器与主机 1 均采用静态 IP 地址配置，相关地址信息见图中标注；主机 2～主机 N 通过 DHCP 服务器动态获取 IP 地址等配置信息。
> 
> ![](https://pic3.zhimg.com/v2-47357ad300ae54c76d490d4c60ad5c26_r.jpg)
> 
> (1) DHCP 服务器可为主机 2～主机 N 动态分配 IP 地址的最大范围是什么？主机 2 使用 DHCP 协议获取 IP 地址的过程中，发送的封装 DHCP Discover 报文的 IP 分组的源 IP 地址和目的 IP 地址分别是什么？
> 
> (2) 若主机 2 的 ARP 表为空，则该主机访问 Internet 时，发出的第一个以太网帧的目的 MAC 地址是什么？封装主机 2 发往 Internet 的 IP 分组的以太网帧的目的 MAC 地址是什么？
> 
> (3) 若主机 1 的子网掩码和默认网关分别配置为 255.255.255.0 和 111.123.15.2，则该主机是否能访问 WWW 服务器？是否能访问 Internet？请说明理由。
### 解
> [!done]+
> (1) 在网络拓扑图中，网关接口的 IP 地址 111.123.15.1/24、DHCP 服务器的 IP 地址 111.123.15.2/24、WWW 服务器的 IP 地址 111.123.15.3/24 和主机 1 的 IP 地址 111.123.15.4/24 都属于 CIDR 地址块 111.123.15.0/24，该地址块主机号占 8 位。
> 
> 第一问。除去 1 个主机号全 0 的网络地址 111.123.15.0/24、一个主机号全 1 的广播地址 111.123.15.255/24 以及前面已分配的 4 个 IP 地址，剩余 DHCP 服务器可为主机 2~ 主机 N 动态分配 IP 地址的最大范围是 111.123.15.5~111.123.15.254。
> 
> 第二问。DHCP Discover 报文用于在局域网中寻找可用的 DHCP 服务器。这个报文是在设备启动连接网络时发送的，用来请求 IP 地址分配。DHCP Discover 报文中的源 IP 地址通常被设置为 0.0.0.0，因为在发送 Discover 消息时，设备还没有被分配 IP 地址。这个地址表示未知或无效。目的 IP 地址通常是广播地址，即 255.255.255.255。这是因为 DHCP Discover 需要被局域网中的所有 DHCP 服务器接收，以便它们可以回复设备的请求，并提供 IP 地址与其他网络配置信息。广播地址确保了所有网络中的 DHCP 服务器都可以收到这个消息。因此，主机 2 发送的封装 DHCP Discover 报文的 IP 分组的源 IP 地址和目的 IP 地址分别是 0.0.0.0 和 255.255.255.255。
> 
> (2) 因为主机 2 的 ARP 表为空，它将会发送一个 ARP 请求来解析互联网上的目标 IP 地址。在发送这个 ARP 请求之前，主机 2 会尝试查找默认网关的 IP 地址（通常是连接到互联网的路由器），然后构建一个 ARP 请求，其中包含该默认网关的 IP 地址。当这个 ARP 请求被发送时，目的 MAC 地址会被设置为广播地址（即所有位全为 1 的 MAC 地址 ff:ff:ff:ff:ff:ff），以确保所有网络中的设备都能收到这个请求。
> 
> 一旦主机 2 收到了默认网关的 MAC 地址 00-al-al-al-al-al，它就可以构建 IP 数据包并封装成以太网帧。这时，封装主机 2 发往互联网的 IP 数据包的以太网帧的目的 MAC 地址将会被设置为默认网关的 MAC 地址 00-al-al-al-al-al，这样数据包就可以被正确地路由到互联网上的目标地址。
> 
> 综上所述，主机 2 发出的第一个以太网帧的目的 MAC 地址是 ff-ff-ff-ff-ff-ff，封装主机 2 发往 Internet 的 IP 分组的以太网帧的目的 MAC 地址是 00-al-al-al-al-al。
> 
> (3) 第一问。主机 1 的 IP 地址为 111.123.15.4，子网掩码为 255.255.255.0，子网掩码前 24 位全 1，表示网络号占 24 位，因此主机 1 的 IP 地址为 111.123.15.4/24，因为 WWW 服务器的 IP 地址 111.123.15.3/24 和主机 1 的 IP 地址 111.123.15.4/24 都属于 CIDR 地址块 111.123.15.0/24，两者处于一个局域网中，因此主机 1 能访问 WWW 服务器。
> 
> 第二问。主机 1 要访问 Internet，默认网关应该是 111.123.15.1，但被错误配置成 111.123.15.2，因此当主机 1 访问 Internet 时，主机 1 发出的 IP 分组会被路由到错误的默认网关（111.123.15.2），因此主机 1 不能访问 Internet。
> 
> 综上所述，主机 1 能访问 WWW 服务器，但不能访问 Internet。