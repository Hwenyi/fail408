---
publish: true
tags: []
aliases: 
finished: true
title: 题47
created: "2024-11-21 07:20"
updated: "2024-12-19 07:18"
---
## 题47
### 题目
> [!question]+
> （9 分）
> 
> 某网络拓扑如题 47 图所示，其中 R 为路由器，主机 H1～H4 的 IP 地址配置以及 R 的各接口 IP 地址配置如图中所示。现有若干以太网交换机（无 VLAN 功能）和路由器两类网络互联设备可供选择。
> 
> ![](https://pic1.zhimg.com/v2-4776d46740a7fa6dec0587e1a9bf6a02_r.jpg)
> 
> 请回答下列问题：
> 
> (1) 设备 1、设备 2 和设备 3 分别应选择什么类型的网络设备？
> 
> (2) 设备 1、设备 2 和设备 3 中，哪几个设备的接口需要配置 IP 地址？为对应的接口配置正确的 IP 地址。
> 
> (3) 为确保主机 H1～H4 能够访问 Internet，R 需要提供什么服务？
> 
> (4) 若主机 H3 发送一个目的地址为 192.168.1.127 的 IP 数据报，网络中哪几个主机会接收该数据报？
### 解
> [!done]+
> (1) 主机 H1 的 IP 地址为 192.168.1.2/26，网络号占 26 位，主机号占 32-26 = 6 位，将其后 8 位写成二进制形式，二进制位用红色表示， $\rm 192.168.1.\color{red}{00000010}$ 。所属子网主机号的位用 x 表示，每个 x 可以取 0 或 1，得到 $\rm 192.168.1.\color{red}{00xxxxxx}$ 。
> 
> 主机 H2 的 IP 地址为 192.168.1.3/26，网络号占 26 位，主机号占 32-26 = 6 位，将其后 8 位写成二进制形式，二进制位用红色表示， $\rm 192.168.1.\color{red}{00000011}$ 。所属子网主机号的位用 x 表示，每个 x 可以取 0 或 1，得到 $\rm 192.168.1.\color{red}{00xxxxxx}$ 。
> 
> 主机 H3 的 IP 地址为 192.168.1.66/26，网络号占 26 位，主机号占 32-26 = 6 位，将其后 8 位写成二进制形式，二进制位用红色表示， $\rm 192.168.1.\color{red}{01000010}$ 。所属子网主机号的位用 x 表示，每个 x 可以取 0 或 1，得到 $\rm 192.168.1.\color{red}{01xxxxxx}$ 。
> 
> 主机 H4 的 IP 地址为 192.168.1.67/26，网络号占 26 位，主机号占 32-26 = 6 位，将其后 8 位写成二进制形式，二进制位用红色表示， $\rm 192.168.1.\color{red}{01000011}$ 。所属子网主机号的位用 x 表示，每个 x 可以取 0 或 1，得到 $\rm 192.168.1.\color{red}{01xxxxxx}$ 。
> 
> 综上所述，主机 H1 的 IP 地址和主机 H2 的 IP 地址都属于子网空间 $\rm 192.168.1.\color{red}{00xxxxxx}$ ，即 192.168.1.0/26。主机 H3 的 IP 地址和主机 H4 的 IP 地址都属于子网空间 $\rm 192.168.1.\color{red}{01xxxxxx}$ ，即 192.168.1.64/26。
> 
> H1 和 H2 属于同一个局域网，通过以太网交换机（无 VLAN 功能）进行互联，设备 2 是以太网交换机。
> 
> H3 和 H4 属于同一个局域网，通过以太网交换机（无 VLAN 功能）进行互联，设备 3 是以太网交换机。
> 
> 上述两个局域网通过路由器互联，设备 1 是路由器。
> 
> 综上，设备 1 是路由器，设备 2 是以太网交换机，设备 3 是以太网交换机。
> 
> (2) 设备 1 为路由器，其接口应配置 IP 地址。
> 
> H1 和 H2 的默认网关均为 192.168.1.1，所以路由器的接口 IF2 的 IP 地址为 192.168.1.1。
> 
> H3 和 H4 的默认网关均为 192.168.1.65，所以路由器的接口 IF3 的 IP 地址为 192.168.1.65。
> 
> 设备 1 的接口 IF1 与路由器 R 的 IP 地址为 192.168.1.253/30 的接口相连，IP 地址为 192.168.1.253/30，网络号占 30 位，主机号占 32-30 = 2 位，将其后 8 位写成二进制形式，二进制位用红色表示， $\rm 192.168.1.\color{red}{11111101}$ 。所属子网主机号的位用 x 表示，每个 x 可以取 0 或 1，得到 $\rm 192.168.1.\color{red}{111111xx}$ ，其地址空间地址数为 $2^2=4$ ，除去一个主机号位全 0 的网络地址和一个主机号位全 1 的广播地址，剩余 2 个地址 $\rm 192.168.1.\color{red}{11111101}$ 和 $\rm 192.168.1.\color{red}{11111110}$ （即 192.168.1.253 和 192.168.1.254）为两个可分配的主机号，192.168.1.253 已经被分配给路由器 R 的一个接口，因此设备 1 的接口 IF1 的 IP 地址为 192.168.1.254。
> 
> 综上所述，设备 1 的 IFl、IF2 和 IF3 接口的 IP 地址分别是：192.168.1.254、192.168.1.1 和 192.168.1.65。
> 
> (3) 主机 H1、H2、H3 和设备 1 的所有接口以及 R 连接设备 1 的接口的 IP 地址都属于私有地址段的 C 类为 192.168.0.0~192.168.255.255，而 R 连接 Internet 的接口的 IP 地址 101.1.2.10 属于公有 IP 地址，所以 R 需要提供 NAT 服务，即网络地址转换服务。
> 
> (4) 主机 H3 发送一个目的地址为 192.168.1.127 的 IP 数据报。将 192.168.1.127 后 8 位写成二进制形式，二进制位用红色表示， $\rm 192.168.1.\color{red}{01111111}$ 。该地址是主机 H3 所在子网 $\rm 192.168.1.\color{red}{01xxxxxx}$ 的广播地址，由于交换机不隔离广播域，交换机会向除进入交换机端口外的其他端口转发广播帧，设备 3 是交换机，该 IP 数据报通过设备 3 的端口 IF2 进入设备 3，设备 3 会通过端口 IF1 和 IF3 转发该 IP 数据报，该 IP 数据报通过端口 IF1 到达设备 1，设备 1 是路由器，路由器能够隔离广播域，因此会丢弃该数据报，该 IP 数据报通过端口 IF3 到达主机 H4，主机 H4 接受该数据报。
> 
> 综上所述，只有主机 H4 会接收到数据报。