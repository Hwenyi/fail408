---
publish: true
tags: 
aliases: 
finished: true
title: 题43
created: "2024-11-21 06:41"
updated: "2024-11-21 07:40"
---
## 题43
### 题目
> [!question]+
> （11 分）
> 
> 假定在一个 8 位字长的计算机中运行如下 C 程序段：
> 
> ```cpp
> unsigned int x=134;
> unsigned int y=246;
> int m=x;
> int n=y;
> unsigned int z1=x-y;
> unsigned int z2=x+y;
> int k1=m-n;
> int k2=m+n;
> ```
> 
> 若编译器编译时将 8 个 8 位寄存器 R1～R8 分别分配给变量 x、y、m、n、z1、z2、k1 和 k2。请回答下列问题。（提示：带符号整数用补码表示）
> 
> (1) 执行上述程序段后，寄存器 R1、R5 和 R6 的内容分别是什么（用十六进制表示）？
> 
> (2) 执行上述程序段后，变量 m 和 k1 的值分别是多少（用十进制表示）？
> 
> (3) 上述程序段涉及带符号整数加 / 减、无符号整数加 / 减运算，这四种运算能否利用同一个加法器及辅助电路实现？简述理由。
> 
> (4) 计算机内部如何判断带符号整数加 / 减运算的结果是否发生溢出？上述程序段中，哪些带符号整数运算语句的执行结果会发生溢出？
### 解
> [!done]+
> 由于这里字长只有 8 位，C 语言用补码表示，所以 unsigned int 的范围为 $0\sim 2^8-1$ ，即 0~255，int 的范围为 $-2^7\sim 2^7-1$ ，即 - 128~127。两者的表示范围均为 $2^8$ = 256。
> 
> 方法一：二进制运算
> 
> 本题考察二进制补码运算。
> 
> $$[x]_{\text{原}}\underset{\text{正数不变；负数符号位不变，数值位取反，再加一}}{\overset{\text{正数不变；负数符号位不变，数值位取反，再加一}}{\rightleftarrows}}[x]_{\text{补}}\underset{\text{符号和数值位取反，再加一}}{\overset{\text{符号和数值位取反，再加一}}{\rightleftarrows}}[-x]_{\text{补}}$$
> 
> 执行第 1 行，所有机器数视为无符号数，[x] 补 = 134=1000 0110B；
> 
> 执行第 2 行，所有机器数视为无符号数，[y] 补 = 246=1111 0110B；
> 
> 执行第 3 行，所有机器数视为有符号数，[m] 补 =[x] 补 = 1000 0110B，[m] 原 = 1111 1010B=-122；
> 
> 执行第 4 行，所有机器数视为有符号数，[n] 补 =[y] 补 = 1111 0110B，[n] 原 = 1000 1010B=-10；
> 
> 执行第 5 行，所有机器数视为无符号数，[z1] 补 =[x-y] 补 =[x] 补 +[-y] 补 = 1000 0110B+00001010B=1001 0000B=144；
> 
> 执行第 6 行，所有机器数视为无符号数，[z2] 补 =[x+y] 补 =[x] 补 +[y] 补 = 1000 0110B+1111 0110B=(1)0111 1100B=124；
> 
> 执行第 7 行，所有机器数视为有符号数，[k1] 补 =[m-n] 补 =[m] 补 +[-n] 补 = 1000 0110B+0000 1010B=1001 0000B，[k1] 原 = 1111 0000B=-112；
> 
> 执行第 8 行，所有机器数视为有符号数，[k2] 补 =[m+n] 补 =[m] 补 +[n] 补 = 1000 0110B+1111 0110B=(1)0111 1100B=124；
> 
> 方法二：十进制运算
> 
> 执行第 1 行，unsigned int x=134；
> 
> 执行第 2 行，unsigned int y=246；
> 
> 执行第 3 行，int m=x=134>127，上溢，负向偏移模数 $2^8$ 得 134-256=-122；
> 
> 执行第 4 行，int n=y=246>127，上溢，负向偏移模数 $2^8$ 得 246-256=-10；
> 
> 执行第 5 行，unsigned int z1=x-y=134-246=-122<0，下溢，正向偏移模数 $2^8$ 得 - 122+256=144；
> 
> 执行第 6 行，unsigned int z2=x+y=134+246=380>255，上溢，负向偏移模数 $2^8$ 得 380-256=124；
> 
> 执行第 7 行，int k1=m-n=(-122)-(-10)=-112；
> 
> 执行第 8 行，int k2=m+n=(-122)+(-10)=-132<-128，下溢，正向偏移模数 $2^8$ 得 - 132+256=124。
> 
> 因为 R1～R8 分别存储 x、y、m、n、z1、z2、k1 和 k2。可得下表：
> 
> $\begin{array}{c|cccccccc} \text{寄存器}&\text{R1}&\text{R2}&\text{R3}&\text{R4}&\text{R5}&\text{R6}&\text{R7}&\text{R8}\\\hline \text{变量}&\text{x}&\text{y}&\text{m}&\text{n}&\text{z1}&\text{z2}&\text{k1}&\text{k2}\\ \text{二进制}&\text{1000 0110B}&\text{1111 0110B}&\text{1000 0110B}&\text{1111 0110B}&\text{1001 0000B}&\text{0111 1100B}&\text{1001 0000B}&\text{0111 1100B}\\ \text{十六进制}&\text{86H}&\text{F6H}&\text{86H}&\text{F6H}&\text{90H}&\text{7CH}&\text{90H}&\text{7CH}\\ \text{有无符号}&\text{无}&\text{无}&\text{有}&\text{有}&\text{无}&\text{无}&\text{有}&\text{有}\\ \text{十进制}&\text{134}&\text{246}&\text{-122}&\text{-10}&\text{144}&\text{124}&\text{-112}&\text{124}\\ \end{array}$
> 
> (1) R1 内容为 86H，R5 内容为 90H，R6 内容为 7CH。
> 
> (2) m 的值为 - 122，k1 的值为 - 112。
> 
> (3) 能。 $n$ 位加法器实现的是模 $2^n$ 无符号整数加法运算。
> 
> 对于无符号整数 a 和 b，a+b 可以直接用加法器实现，而 a-b 可用 a 加 b 的补数实现，即 ${\rm a-b = a+[-b]_{\text{补}}(\text{mod }}2^n)$ ，所以 $n$ 位无符号整数加 / 减运算都可在 $n$ 位加法器中实现。
> 
> 由于带符号整数用[[补码]]表示，补码加 / 减运算公式为 ${\rm [a+b]_{\text{补}} = [a]_{\text{补}}+[b]_{\text{补}}(\text{mod }}2^n)$ 、 ${\rm [a-b]_{\text{补}} = [a]_{\text{补}}+[-b]_{\text{补}}(\text{mod }}2^n)$ ，所以_n_位带符号整数加 / 减运算都可在 $n$ 位加法器中实现。
> 
> (4) 第一问，这里采用一位符号位，有两种方法处理。
> 
> 方法一：若 正 + 正 = 负 或 负 + 负 = 正，则[[溢出]]，否则不溢出。即若加数与被加数符号位相同，但与和的符号位不同，则溢出，否则不溢出。
> 
> 方法二：根据数据位的进位情况判断溢出，Cs 表示两数之间符号[[位运算]]的进位，C1 表示最高数值位，若 Cs⊕C1=1，则溢出，否则不溢出。
> 
> 第二问，注意题目仅考察带符号整数运算语句。最后一条语句发生溢出。
> 
> 方法一：二进制计算
> 
> 因为 1000 0110B+1111 0110B=(1)0111 1100B，括弧中为加法器的进位，根据上述溢出判断规则，可知结果溢出。
> 
> 方法二：十进制计算
> 
> 因为 (-122)+(-10)=-132<-128，在本题 int 表示范围之外，下溢，需要正向偏移模数 $2^8$ 得 - 132+256=124。可知结果溢出。