---
publish: true
tags: 
aliases: 
finished: true
title: 题32
created: "2024-11-21 06:40"
updated: "2024-11-21 07:40"
---
## 题32
### 题目
> [!question]+
> 有两个并发执行的进程 P1 和 P2，共享初值为 1 的变量 x。P1 对 x 加 1，P2 对 x 减 1。加 1 和减 1 操作的指令序列分别如下所示。
> 
> ```cpp
> P1 // 加1操作
> load R1, x // 取x到寄存器R1中
> inc R1
> store x, R1 // 将R1的内容存入x
> P2 // 减1操作
> load R2, x // 取x到寄存器R2中
> dec R2
> store x, R2 // 将R2的内容存入x
> ```
> 
> 两个操作完成后，x 的值（ ）。
> 
> A. 可能为 - 1 或 3
> 
> B. 只能为 1
> 
> C. 可能为 0、1 或 2
> 
> D. 可能为 - 1、0、1 或 2
### 解
> [!done]+
> 为了方便讨论，将每行代码进行编号
> 
> ```cpp
> load R1, x ① // 取x到寄存器R1中
> inc R1 ② // 将R1中的操作数加一
> store x, R1 ③ // 将R1的内容存入x
> load R2, x ④ // 取x到寄存器R2中
> dec R2 ⑤ // 将R2中的操作数减一
> store x, R2 ⑥ // 将R2的内容存入x
> ```
> 
> 方法一：枚举所有情况
> 
> x 为 1：例如执行①, ②, ③, ④, ⑤, ⑥，或者执行④, ⑤, ⑥, ①, ②, ③。
> 
> x 为 2：例如执行①, ②, ④, ⑤, ⑥, ③。
> 
> x 为 0：例如执行 ④, ⑤, ①, ②, ③ ⑥。
> 
> 本题选 C。
> 
> 方法二：排除法
> 
> 由于 P1 为加 1 操作，P2 为减 1 操作，各执行一次，结果在数轴上具有对称性，由共享初值为 1 的变量 x，结果关于 1 对称，排除 D。
> 
> 由于 P1 和 P2 均只执行 1 次，要得到 3 需要执行两次 P1，得到 - 1 需要执行两次 P2，排除 A 和 D。
> 
> 由于先执行 P1 后执行 P2 得到 1，正确选项一定包含 1，排除 A。
> 
> 由于 P1 和 P2 均不是原子操作，排除 B。
> 
> 本题选 C。