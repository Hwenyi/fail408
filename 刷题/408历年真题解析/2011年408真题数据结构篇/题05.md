---
publish: true
tags: 
aliases: 
finished: true
title: 题05
created: "2024-11-21 06:41"
updated: "2024-11-21 07:40"
---
## 题05
### 题目
> [!question]+
> 若一棵二叉树的前序遍历序列和后序遍历序列分别为 1, 2, 3, 4 和 4, 3, 2, 1，则该二叉树的中序遍历序列不会是（ ）。
> 
> A. 1, 2, 3, 4
> 
> B. 2, 3, 4, 1
> 
> C. 3, 2, 4, 1
> 
> D. 4, 3, 2, 1
### 解
> [!done]+
> **方法一：构造**
> 
> 利用前序遍历序列和后序遍历序列构造所有可能的二叉树。
> 
> 前序遍历是 “根左右” 遍历，后序遍历是 “左右根” 遍历。
> 
> 第一轮递归：从前序遍历序列中取出第一个元素作为二叉树的根结点，从后序遍历序列中取出最后一个元素作为二叉树的根结点，这两个元素一定相同，否则无法构造二叉树，本题均为 1。
> 
> 第二轮递归：从前序遍历序列未处理的子串中取出第一个元素作为二叉树的左子树的根结点，从后序遍历序列未处理的子串中取出最后一个元素作为二叉树的右子树的根结点，这两个元素不一定相同。如果相同，说明有一个子树为空，本题均为 2，也就是根结点只有一个孩子结点 2，2 可以随机分配在左子树或者右子树。
> 
> 第三轮递归：从前序遍历序列未处理的子串中取出第一个元素作为二叉树的左子树的根结点，从后序遍历序列未处理的子串中取出最后一个元素作为二叉树的右子树的根结点，这两个元素不一定相同。如果相同，说明有一个子树为空，本题均为 3，也就是根结点只有一个孩子结点 3，3 可以随机分配在左子树或者右子树。
> 
> 第四轮递归：从前序遍历序列未处理的子串中取出第一个元素作为二叉树的左子树的根结点，从后序遍历序列未处理的子串中取出最后一个元素作为二叉树的右子树的根结点，这两个元素不一定相同。如果相同，说明有一个子树为空，本题均为 4，也就是根结点只有一个孩子结点 4，4 可以随机分配在左子树或者右子树。
> 
> ![](https://pic3.zhimg.com/v2-6d05e471f0d1ca5c76ec5e132f063e72_r.jpg)
> 
> 结点 2、3 和 4 均可能在其父结点的左子树或者右子树，根据乘法原理，总共有 $2\times2\times2=8$ 种可能。
> 
> 画出所以
> 
> ![](https://pic3.zhimg.com/v2-ab4f98d2cd198b66404e2a09c97c9b18_r.jpg)
> 
> 对比选项，中序遍历序列不可能为 3, 2, 4, 1。
> 
> 本题选 **C**。
> 
> **方法二：利用选项构造**
> 
> 方法一是利用[[前序遍历]]序列和[[后序遍历]]序列构造[[二叉树]]。
> 
> 我们知道前序遍历序列和中序遍历序列可以唯一确定一棵二叉树，我们可以利用题目的前序遍历序列和选项的中序遍历序列构造二叉树，最后检查该二叉树的后序遍历序列是否和题目的后序遍历序列一致。
> 
> ![](https://pic1.zhimg.com/v2-003accc652b7829038d7881f573cf192_r.jpg)
> 
> 检查得，用题目的前序遍历序列和 C 选项的中序遍历序列构造出的二叉树的后序遍历序列和题目的后序遍历序列不一致。
> 
> 本题选 **C**。