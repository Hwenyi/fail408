---
publish: true
tags: 
aliases: 
finished: true
title: 题07
created: "2024-11-21 07:30"
updated: "2024-11-21 07:40"
---
## 题07
### 题目
> [!question]+
> 下列关于非空 B 树的叙述中，正确的是（ ）。
> 
> I. 插入操作可能增加树的高度
> 
> II. 删除操作一定会导致叶结点的变化
> 
> III. 查找某关键字总是要查找到叶结点
> 
> IV. 插入的新关键字最终位于叶结点中
> 
> A. 仅 I
> 
> B. 仅 I 和 II
> 
> C. 仅 III 和 IV
> 
> D. 仅 I、II 和 IV
### 解
> [!done]+
> 原则上一切以《数据结构（C 语言版）》和其参考用书《数据结构基础》1976 年版等为准。
> 
> I. 插入操作可能会导致关键字上溢，关键字上溢到根结点，树的高度加一。I 正确。
> 
> II.
> 
> - 如果删除的关键字位于叶结点：
> - 在叶结点中删除该关键字，该叶结点一定发生变化。分析到这里，可以不用进行继续分析。继续分析简写如下，如果删除该结点后关键字个数 $n\ge \lceil m/2\rceil - 1$ ，没有后续操作，如果该结点删除关键字后关键字个数 $n< \lceil m/2\rceil - 1$ ，需要从兄弟结点借一个关键字，又分兄弟够借和兄弟不够借两种情况，这里不进行继续分析。无论上述哪种情况，此时叶结点一定发生变化。
> - 如果删除的关键字位于非叶结点：
> - 用被删除关键字的后继关键字替换被删除关键字，该后继关键字为于被删除关键字的右子树的最下层最左边，即一定位于叶结点，该叶结点一定发生变化。分析到这里，可以不用进行继续分析。继续分析简写如下，如果该结点删除关键字后关键字个数 $n\ge \lceil m/2\rceil - 1$ ，没有后续操作，如果删除该结点后关键字个数 $n< \lceil m/2\rceil - 1$ ，需要从兄弟结点借一个关键字，又分兄弟够借和兄弟不够借两种情况，这里不进行继续分析。此时叶结点一定发生变化。
> 
> 综上，无论删除关键字是位于叶结点还是位于非叶结点，一定有叶结点发生变化。II 正确。
> 
> III. B 树中所有结点均可以存储关键字，若查找的关键字位于非叶结点，则不可能查找到叶结点。III 错误。
> 
> IV. 插入新的关键字，插入后进行调整，新插入的关键字不一定位于叶结点中。可以用依次将关键字 5, 6, 9, 14, 8, 2, 12, 15, 13 插入初始为空的 4 阶 B 树进行模拟，最后 13 位于非叶结点中。也就是插入关键字后若被插入关键字所在的结点需要进行调整（结点发生分裂），且被插入的关键字此时恰为该结点的第 $\lceil m/2\rceil$ 个关键字，则该关键字会上溢到该结点的父结点，如此迭代，也就是在这种情况下被插入的关键字最终一定位于非叶结点中。
> 
> 分享一个数据可视化网站：[B-Tree Visualization](https://www.cs.usfca.edu/~galles/visualization/BTree.html)，可以模拟 B 树的插入和删除过程，该网站的 B 树基本操作的算法在不勾选勾选 Preemptive Split / Merge (Even max degree only) 的情况下和《数据结构（C 语言版）》（参考用书《数据结构基础》1976 年版）的 B 树插入操作算法完全一致，B 树删除操作算法略有区别，《数据结构（C 语言版）》要求用直接后继关键字代替被删除关键字，而该网站用直接前驱关键字代替被删除关键字。
> 
> 还有，为什么《数据结构（C 语言版）》不详细介绍删除的关键字位于非叶结点的情况，第一个原因可能是该情况相比删除的关键字位于叶结点更加复杂，直接留给学生自学。第二个原因可能是 B 树是是一棵分支极多的树，导致的结果是绝大多数关键字都位于叶结点上，也就意味着绝大多数关键字操作都是直接作用在叶结点上。
> 
> 综上，I 和 II 正确。
> 
> 本题选 **B**。
> 
> **_拓展_**
> 
> 《数据结构（C 语言版）》：B 树插入操作算法：后置分裂；B 树删除操作算法：后置合并。
> 
> 《算法导论》：B 树插入操作算法：前置分裂；B 树删除操作算法：前置合并。
> 
> 注意 408 考试中不能使用《算法导论》的 B 树基本操作的算法进行模拟。因为如果用《算法导论》中的 B 树基本操作的算法进行分析会得出错误答案：
> 
> I. 插入操作前置分裂可能需要分裂根结点，此时需要创建新的根结点，树的高度加一。I 正确。
> 
> II.
> 
> - 如果删除的关键字位于叶结点：
> - 在叶结点中删除该关键字，该叶结点一定发生变化。
> - 如果删除的关键字位于非叶结点：
> - 先进行单程向下的合并进行前置分裂，可以合并被删除关键字结点的孩子结点 $x$ 和 $y$ ，设 $x$ 在左边， $y$ 在右边，若 $x$ 和 $y$ 还有孩子结点， $x$ 的最右边的孩子结点会和 $y$ 最左边的孩子结点合并，递归到叶结点终止，一定有两个叶结点发生合并。此时叶结点一定发生变化。
> 
> 综上，无论删除关键字是位于叶结点还是位于非叶结点，一定有叶结点发生变化。II 正确。
> 
> III. B 树中所有结点均可以存储关键字，若查找的关键字位于非叶结点，则不可能查找到叶结点。III 错误。
> 
> IV. 插入新的关键字，一定位于叶结点。IV 正确。
> 
> 此时，I 、II 和 IV 正确。
> 
> 所以如果按照《算法导论》B 树基本操作的算法进行模拟，本题选 D。但是 408 中凡是《算法导论》与《数据结构（C 语言版）》有冲突的地方一切以《数据结构（C 语言版）》为准。
> 
> 2022 年第 8 题 B 选项为如果按照《数据结构（C 语言版）》的删除算法进行模拟，为错误选项，但可以用《算法导论》B 树删除操作的算法解释。但命题组的出题意图应该仅仅是为了考察 B 树性质（详见本人 2022 年第 8 题题解的方法一），以及 B 树的基本操作必须维护 B 树性质这两点，所以出现了这种包含多种 B 树删除操作的算法的真题，考纲中也没有明确说明，只能从历年真题进行推断。注意，《数据结构（C 语言版）》中 B 树插入操作的算法与《数据结构（C 语言版）》中 B 树删除操作的算法是配对的，《算法导论》中 B 树插入操作的算法与《算法导论》中 B 树删除操作的算法是配对的，原则上两者不能混用。
> 
> 本题难度极高，全面考察了《数据结构（C 语言版）》中 B 树的基本操作。
> 
> 本人完整整理 B 树考点如下：
> 
> [408 数据结构考点：B 树](https://zhuanlan.zhihu.com/p/625344869)
> 
> 本题难度：⭐️⭐️⭐️⭐️⭐️