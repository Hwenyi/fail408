---
publish: true
tags: 
aliases: 
finished: true
title: 题44
created: "2024-11-21 06:43"
updated: "2024-11-21 07:40"
---
## 题44
### 题目
> [!question]+
> （14 分）某计算机采用 16 位定长指令字格式，其 CPU 中有一个标志寄存器，其中包含进位 / 借位标志 CF、零标志 ZF 和符号标志 NF。假定为该机设计了条件转移指令，其格式如下：
> 
> ![](https://img.hwenyi.tech/202412030214324.webp)
> 
> 其中，00000 为操作码 OP；C、Z 和 N 分别为 CF、ZF 和 NF 的对应检测位，某检测位为 1 时表示需检测对应标志，需检测的标志位中只要有一个为 1 就转移，否则就不转移，例如，若 C=1，Z=0，N=1，则需检测 CF 和 NF 的值，当 CF=1 或 NF=1 时发生转移；OFFSET 是相对偏移量，用补码表示。转移执行时，转移目标地址为 (PC)+2+2×OFFSET；顺序执行时，下条指令地址为 (PC)+2。请回答下列问题。
> 
> (1) 该计算机存储器按字节编址，还是按字编址？该条件转移指令向后（反向）最多可跳转最多少条指令？
> 
> (2) 某条件转移指令的地址为 200CH，指令内容如下图所示，若该执行时 CF=0，ZF=0，NF=1，则该指令执行后 PC 的值是多少？若该指令执行时 CF=1，ZF=0，NF=0，则该指令执行后 PC 的值又是多少？请给出计算过程。
> 
> ![](https://img.hwenyi.tech/202412030214325.webp)
> 
> (3) 实现 “无符号数比较小于等时转移” 功能的指令中，C、Z 和 N 应各是什么？
> 
> (4) 以下是该指令对应的数据通路示意图，要求给出中部件①~③的名称或功能说明。
> 
> ![](https://img.hwenyi.tech/202412030214326.webp)
### 解
> [!done]+
> (1) 第一问。因计算机采用 16 位[[定长指令]]字格式，且下条指令地址为 (PC)+2，PC 自增是一个[[指令字长]]的字长数，16bit/2=8bit=1B，所以编址单位是字节。
> 
> 第二问。观察条件转移指令格式，偏移 OFFSET 为 8 位补码，范围为 - 128~127，所以相对于当前条件转移指令，PC 自增后偏移，向后偏移 OFFSET 最小为 - 128，向后最多可跳转 $|1-128|=127$ 条指令。
> 
> (2) 指令中 C=0，Z=1，N=1，所以根据本题中检测位的定义，应根据 ZF 和 NF 的值来判断是否转移，ZF=1 或 NF=1 时发生转移，即 $\rm ZF\lor NF = 1$ 时发生转移，否则不发生转移。
> 
> 第一问。当 CF=0，ZF=0，NF=1 时， $\rm ZF\lor NF = 1$ ，需转移。已知指令中偏移量为 11100011B，符号扩展后为 1111111111100011B，左移一位（乘 2）后 1111111111000110B=FFC6H，转移执行时，转移目标地址为 (PC)+2+2×OFFSET=200CH+2H+FFC6H=1FD4H。
> 
> 第二问。当 CF=1，ZF=0，NF=0 时， $\rm ZF\lor NF = 0$ ，不转移。PC 的值为 200CH+2H=200EH。
> 
> (3) 无符号数比较小于等时转移，设 a<=b 为真，移项得 a-b<=0 为真，所以 CF=1 或 ZF=1 为真，因为 C、Z 和 N 分别为 CF、ZF 和 NF 的对应检测位，所以指令中的 C、Z 和 N 应分别设置为 C=1，Z=1，N=0。
> 
> (4) 部件①存放指令。推出：部件①为指令寄存器 IR；从指令中可以取出 OFFSET，以执行后续操作。
> 
> 计算式 (PC)+2+2×OFFSET 中，先执行 OFFSET 乘以 2（算数左移 1 位），再执行加法，2×OFFSET 加上 (PC)+2（右边的加法器执行 (PC)+2 操作）。数据通路从 IR 出来了后先经过部件②再经过部件③。可以推出：部件②为移位寄存器 SR；部件③为加法器 ALU。