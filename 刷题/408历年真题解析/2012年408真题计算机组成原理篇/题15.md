---
publish: true
tags: 
aliases: 
finished: true
title: 题15
created: "2024-11-21 06:42"
updated: "2024-11-21 07:40"
---
## 题15
### 题目
> [!question]+
> 某计算机存储器按字节编址，采用小端方式存放数据。假定编译器规定 int 型和 short 型长度分别为 32 位和 16 位，并且数据按边界对齐存储。某 C 语言程序段如下：
> 
> ```cpp
> struct {
>     int a;
>     char b;
>     short c;
> } record;
> record.a=273;
> ```
> 
> 若 record 变量的首地址为 0xC008，则地址 0xC008 中内容及 record.c 的地址分别为（ ）。
> 
> A. 0x00、0xC00D
> 
> B. 0x00、0xC00E
> 
> C. 0x11、0xC00D
> 
> D. 0x11、0xC00E
### 解
> [!done]+
> 这道题考点很多，是一道非常经典的考题。
> 
> **考点一：编址单位**
> 
> 分为按字编址和按字节编址，在 32 位和 64 位计算机中，基本数据类型大小如下
> 
> $\begin{array}{ccc} \text{类型}&\text{位数}&\text{字节数}\\\hline \text{char}&\text{8}&\text{1}\\ \text{short}&\text{16}&\text{2}\\ \text{int}&\text{32}&\text{4}\\ \text{float}&\text{32}&\text{4}\\ \text{double}&\text{64}&\text{8}\\ \end{array}$
> 
> 若按字节编址，则一个数据类型占的地址单元数等于其字节数。
> 
> **考点二：边界对齐**
> 
> 以字节为单位的边界对齐，也称字节对齐，数据在存储时需要被放置在内存地址的倍数上，比如数据类型的大小为 4 个字节，那么它需要被存放在地址是 4 的倍数的位置上。数据按边界对齐存储是一种优化技术，通过调整数据在内存中的存储位置，可以提高计算机系统的性能和效率。
> 
> 边界对齐后，结构体大小为其大小最大成员变量大小的整数倍。
> 
> 根据边界对齐的定义，record 变量的首地址为 0xC008，从首地址开始，按顺序从低地址到高地址依次放入 a、b 和 c 这 3 个成员变量，模拟过程如下：
> 
> ![](https://picx.zhimg.com/v2-cc2022c8c61c672d832df0e95d9013a9_r.jpg)
> 
> **考点三：大端方式和小端方式**
> 
> 大端方式 (Big Endian)：数据低位保存在高地址中，数据高位保存在低地址中。大端序和人的书写顺序一致。
> 
> 小端方式 (Little Endian)：数据低位保存在低地址中，数据高位保存在高地址中。
> 
> 以一个 16 位（2 字节）整数 0x1234 为例，它在大端方式和小端方式下的存储方式如下：
> 
> 大端方式存储：高字节 0x12 存储在低地址，低字节 0x34 存储在高地址。
> 
> 小端方式存储：低字节 0x34 存储在低地址，高字节 0x12 存储在高地址。
> 
> 在实际应用中，不同的计算机体系结构和操作系统可能采用不同的字节序。例如，x86 架构的计算机一般使用小端方式，而网络传输通常使用大端方式。
> 
> record.a=273=0x 00 00 01 11，采用小端方式存放数据，可以画出如下布局：
> 
> ![](https://pic2.zhimg.com/v2-cf125ffbb0a982cea0977b2bfccf1e3d_r.jpg)
> 
> 0xC008 中内容为 0x11，record.c 的地址为 0xC00E。
> 
> 本题选 D。
> 
> **_举一反三_**
> 
> 某计算机存储器按字节编址，采用大端方式存放数据。假定编译器规定 int 型和 short 型长度分别为 32 位和 16 位，并且数据按边界对齐存储。某 C 语言程序段如下：
> 
> ```cpp
> struct {
>     char a;
>     int b;
>     short c;
> } record;
> record.b=456;
> ```
> 
> 若 record 变量的首地址为 0xC000，则地址 0xC006 中内容及 record.c 的地址分别为（ ）。
> 
> 参考答案：
> 
> ![](https://pic3.zhimg.com/v2-0113af38d9c089e2d96da5a7ed548e00_r.jpg)
> 
> 0x01、0xC008
> 
> **_拓展_**
> 
> **字节对齐的应用**
> 
> 根据字节对齐的性质，合理类或结构体安排成员变量的顺序能够节约内存。一般情况下将类型相同的成员变量排在一起，能够使得这些成员变量在内存中排布变得紧凑。