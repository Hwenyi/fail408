---
publish: true
tags:
  - 操作系统
  - 进程
  - 并发
  - 信号量
  - 犹豫
  - 题目/选择题
  - pv操作
aliases: 
finished: 
title: 题50
created: 2024-07-23 05:46
updated: 2024-09-21 13:11
TARGET DECK: 刷题::25OS-王道::第 2 章 进程与线程::2.3 同步与互斥::题50
---
## 题50
### 题目
Q:有两个优先级相同的并发程序 ${P}_{1}$ 和 ${P}_{2}$ ,它们的执行过程如下所示。
假设当前信号量 $s1 =$ $0,\;s2 = 0$ 。
当前的 $z = 2$ ,进程运行结束后, $x,y$ 和 $z$ 的值分别是 ( )。
// 进程 P1
```cpp
...
y := 1;
y := y + 2;
z := y + 1;
V(s1);
P(s2);
y := z + y;
...
```
// 进程 P2
```cpp
...
x := 1;
x := x + 1;
P(s1);
x := x + y;
z := x + z;
V(s2);
...
```
A. $5,9,9$ 
B. $5,9,4$
C. $5,{12},9$ 
D. $5,{12},4$
### 分析
A:V是释放，P是申请
- 由于进程并发, 因此进程的执行具有不确定性
- 在 ${P}_{1},{P}_{2}$ 执行到第一个 $P,V$ 操作前, 应该是相互无关的
- 现在考虑第一个对 ${s}_{1}$ 的 ${P}_{s}\;V$ 操作
    - 由于进程 ${P}_{2}$ 是 $P( {s}_{1})$ 操作
        - 因此它必须等待 ${P}_{1}$ 执行完 $V( {s}_{1})$ 操作后才可继续运行
        - 此时的 $x,y,z$ 值分别是 $2,3,4$
    - 当进程 ${P}_{1}$ 执行完 $V( {s}_{1})$ 后便在 $P( {s}_{2})$ 上阻塞
    - 此时 ${P}_{2}$ 可以运行直到 $V( {s}_{2})$
        - 此时的 $x,y,z$ 值分别是 $5,3,9$
    - 进程 ${P}_{1}$ 继续运行到结束
        - 最终的 $x,y,z$ 值分别为 $5,{12},9$ 
### 解
C

