---
publish: true
tags: 
aliases: 
finished: true
title: 题10
created: "2024-11-06 07:05"
updated: "2024-11-09 05:51"
---
## 题10
### 题目
【2018 统考真题】某文件系统采用索引节点存放文件的属性和地址信息, 簇大小为 $4{KB}$ 。 每个文件索引节点占 ${64}\;B$ ,有 11 个地址项,其中直接地址项 8 个,一级、二级和三级间接地址项各 1 个, 每个地址项长度为 $4\;B$ 。请回答下列问题:
1. 该文件系统能支持的最大文件长度是多少? (给出计算表达式即可)
2. 文件系统用 $1M$ （ $1M = {2}^{20}$ ）个簇存放文件索引节点，用 ${512}M$ 个簇存放文件数据。 若一个图像文件的大小为 ${5600}\;B$ ,则该文件系统最多能存放多少个这样的图像文件?
3. 若文件 $F1$ 的大小为 $6{KB}$ ,文件 $F2$ 的大小为 ${40}{KB}$ ,则该文系统获取 $F1$ 和 $F2$ 最后一个簇的簇号需要的时间是否相同? 为什么?
### 分析
[[刷题/408真题分类/OS真题/第 4 章文件管理/4.1 文件/题19]]
![](https://img.hwenyi.tech/202411091147259.webp)
### 解
1. 簇大小为 $4{KB}$ ,每个地址项长度为 $4\;B$ ,因此每簇有 $4{KB}/4\;B = {1024}$ 个地址项。最大文件的物理块数可达 $8 + 1 \times {1024} + 1 \times {1024}^{2} + 1 \times {1024}^{3}$ ,每个物理块 (簇) 大小为 $4{KB}$ ,因此最大文件长度为 $( {8 + 1 \times {1024} + 1 \times {1024}^{2} + 1 \times {1024}^{3}}) \times 4{KB} = {32}{KB} + 4{MB} + 4{GB} + 4{TB}$ 。
2. 文件索引节点总个数为 $1M \times 4{KB}/{64}\;B = {64}M,{5600}\;B$ 的文件占 2 个簇, ${512}M$ 个簇可存放的文件总个数为 ${512}M/2 = {256}M$ 。可表示的文件总个数受限于文件索引节点总个数,因此能存储 ${64}M$ 个大小为 ${5600}\;B$ 的图像文件
3. 文件 $F1$ 的大小为 $6{KB} < 4{KB} \times 8 = {32}{KB}$ ,因此获取文件 $F1$ 的最后一个簇的簇号只需要访问索引节点的直接地址项。文件 $F2$ 大小为 ${40}{KB},4{KB} \times 8 < {40}{KB} < 4{KB} \times 8 + 4{KB} \times {1024}$ , 因此获取 $F2$ 的最后一个簇的簇号还需要读一级索引表。综上,需要的时间不相同。