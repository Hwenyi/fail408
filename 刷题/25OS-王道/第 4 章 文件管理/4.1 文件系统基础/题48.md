---
publish: true
aliases: 
tags:
  - 真题
  - 操作系统
  - 犹豫
  - 地址
finished: true
created: 2024-07-23 06:28
updated: 2024-09-21 13:12
title: 题48
TARGET DECK: 刷题::25OS-王道::第 4 章 文件管理::4.1 文件系统基础::题48
---
## 题48
### 题目
Q:【2015 统考真题】在文件的索引节点中存放直接索引指针 10 个, 一级和二级索引指针各 1 个。
磁盘块大小为 $1\mathrm{{KB}}$ ,每个索引指针占 $4\mathrm{\;B}$ 。
若某文件的索引节点已在内存中，则把该文件偏移量（按字节编址）为 1234 和 307400 处所在的磁盘块读入内存，需访问的磁盘块个数分别是 ( ) 。
A. $1,2$ 
B. $1,3$
C. $2,3$ 
D. $2,4$
### 分析
A:考虑一个磁盘块里面可以放多个表项
也就是1kb/4b=256
对于一级的表，也就是$256\times 256\times 1KB$
对于二级的表，也就是$256\times{1}KB$
对于单独的10个直接索引指针，也就是$10 \times 1KB$
对于这种表，到底要不要**写回**，我有点模糊
### 解
10 个直接索引指针指向的数据块大小为 ${10} \times 1\mathrm{{KB}} = {10}\mathrm{{KB}}$ 。
每个索引指针占 $4\mathrm{\;B}$ ,则每个磁盘块可存放 $1\mathrm{{KB}}/4\mathrm{\;B} = {256}$ 个索引指针,一级索引指针指向的数据块大小为 ${256} \times 1\mathrm{{KB}} = {256}\mathrm{{KB}}$ ,二级索引指针指向的数据块大小为 ${256} \times {256} \times 1\mathrm{{KB}} = {2}^{16}\mathrm{{KB}} = {64}\mathrm{{MB}}$ 。 
按字节编址,偏移量为 1234 时,因 ${1234}\mathrm{\;B} < {10}\mathrm{{KB}}$ ,由**直接索引指针可得到其所在的磁盘块地址**。 
文件的**索引节点已在内存中**, 因此地址可直接得到, **因此仅需 1 次访盘即可**。
偏移量为 307400 时,因 ${10}\mathrm{{KB}} + {256}\mathrm{{KB}} < {307400}\mathrm{\;B} < {64}\mathrm{{MB}}$ ,可知该偏移量的内容在二级索引指针所指向的某个磁盘块中, 索引节点已在内存中, 因此先访盘 2 次得到文件所在的磁盘块地址, **再访盘 1 次**即可读出内容, 共需 3 次访盘。
