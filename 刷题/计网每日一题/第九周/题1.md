---
publish: true
tags: []
aliases: 
finished: true
title: 题1
created: "2024-11-21 03:18"
updated: "2024-12-06 01:11"
---
## 题1
### 题目
网络拓扑如下图所示，相关网络地址和路由器接口号、路由器部分接口的IP地址已标记在图中。
![](https://img.hwenyi.tech/202411211059450.webp)
请回答以下问题：
1) 分别给主机A和B、路由器R1的接口0和路由器R2的接口1配置IP地址，要求主机所配置的IP地址是其所在网络中所能分配的最小地址、路由器接口所配置的IP地址是其所在网络中所能分配的最大地址。
2) 为了使主机A与B之间能够正常通信，需要给A和B各自配置的默认网关的IP地址分别是?
3) 为了使主机A与B之间能够正常通信，对路由器R1和R2进行[[静态路由配置]]，请给出R1和R2进行静态路由配置后各自的路由表内容(格式：目的网络地址 掩码 下一跳)，除静态路由配置的路由条目外，路由器自行得出的直连路由条目也需要在路由表中给出。
4) 在完成 问题1) ~ 问题3) 所要求配置后，在主机A中使用PING工具测试主机A与B之间的连通性。则A使用PING工具发送给B的IP数据报中所封装的PDU以及该PDU的具体类型分别是什么？
5) 假设在进行问题4)之前各主机和路由器的ARP高速缓存是空的，则在进行问题4)的测试过程中使用ARP的数量是多少?若测试过程中传输的IP数据报未出现首部格式错误和误码，则PING测试是否可能超时，为什么？
### 分析
要注意[[路由器的基本工作原理|路由器]]接入网络的那个接口，是属于加入网络的那个子网的，这里也就是第一问中要求的R1的接口1和R2的接口1
第二问又要配置[[默认网关]]，这个就是该主机接入网络路上最近的那个[[路由器的基本工作原理|路由器]]的[[网际协议IP|IP]]地址，也就是我们第一问里面配置的那个路由器地址
第三问为了进行[[静态路由配置]]，这个[[路由表]]，目的网络是对应目标子网里面，主机号要取全0
PING是[[ICMP网际控制报文协议|ICMP]]的一个应用，这里发送的报文就是icmp报文，具体的类型是ICMP回送请求报文
[[ARP地址解析协议|ARP]]不能跨网络直接使用，而是逐个网络（或链路）使用。最大使用次数为所经过路由器的数量加1。对于本题，就是$2+1=3$。
PING测试过程中可能会出现超时，因为[[路由器的基本工作原理|路由器]]收到[[ipv4数据报的首部格式|IP数据报]]后，若为了转发该数据报而查询下一跳IP地址所对应的[[MAC地址]]，这一过程所耗费的时间若**超过了IP数据报能在路由器中缓存的最大时间，则路由器会丢弃该IP数据报。**
### 解
1) A的IP地址为`192.168.1.1`，B的IP地址为`172.16.0.1`，R1的接口0的IP地址为`192.168.1.254`，R2的接口1的IP地址为`172.31.255.254`。
2) A的默认网关的IP地址为`192.168.1.254`，B的默认网关的IP地址为`172.31.255.254`。
3) R1和R2各自的路由表如下所示:

   **R1的路由表**

| 目的网络      | 地址掩码        | 下一跳 |
| ----------- | ------------- | ----- |
| 192.168.1.0 | 255.255.255.0 | 直连  |
| 10.0.0.0    | 255.255.255.252| 直连  |
| 172.16.0.0  | 255.240.0.0   | 10.0.0.2|

   **R2的路由表**

| 目的网络      | 地址掩码        | 下一跳 |
| ----------- | ------------- | ----- |
| 172.16.0.0  | 255.240.0.0   | 直连  |
| 10.0.0.0    | 255.255.255.252| 直连  |
| 192.168.1.0 | 255.255.255.0 | 10.0.0.1|

![](https://img.hwenyi.tech/202412182205098.webp)