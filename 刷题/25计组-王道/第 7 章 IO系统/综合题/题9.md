## 题9
### 题目
【2016 统考真题】假定 CPU 主频为 ${50}\mathrm{{MHz}},\mathrm{{CPI}}$ 为 4 。设备 D 采用异步串行通信方式向主机传送 7 位 ASCII 码字符, 通信规程中有 1 位奇校验位和 1 位停止位, 从 D 接收启动命令到字符送入 I/0 端口需要 ${0.5}\mathrm{\;{ms}}$ 。回答下列问题,要求说明理由。
(1) 每传送一个字符, 在异步串行通信线上共需传输多少位? 在设备 D 持续工作过程中, 每秒最多可向 $\mathrm{I}/0$ 端口送入多少个字符?
(2) 设备 D 采用中断方式进行输入/输出, 示意图如下所示:
![](https://img.hwenyi.tech/202411121742545.webp)
I/O 端口每收到一个字符申请一次中断, 中断响应需 10 个时钟周期, 中断服务程序共有 20 条指令, 其中第 15 条指令启动 D 工作。若 CPU 需从 D 读取 1000 个字符, 则完成这一任务所需时间大约是多少个时钟周期?CPU 用于完成这一任务的时间大约是多少个时钟周期?在中断响应阶段 CPU 进行了哪些操作?
### 分析
[[刷题/25计组-王道/第 6 章 总线/6.2 总线事务和定时/题2]]是这个题目改编的
### 解
1) 每传送一个 ASCII 码字符, 需要传输的位数有 1 位起始位、 7 位数据位 (ASCII 码字符占 7 位)、 1 位奇校验位和 1 位停止位,因此总位数为 $1 + 7 + 1 + 1 = {10}$ 。

I/O 端口每秒最多可接收 ${1000}/{0.5} = {2000}$ 个字符。

2) 一个字符传送时间包括: 设备 D 将字符送 I/O 端口的时间、中断响应时间和中断服务程序前 15 条指令的执行时间。时钟周期为 $1 \div  {50}{MHz} = {20}\;{ns}$ ,设备 $D$ 将字符送 $I/O$ 端口的时间为 ${0.5}{ms}/{20}\;{ns} = {2.5} \times  {10}^{4}$ 个时钟周期。一个字符的传送时间约为 ${2.5} \times  {10}^{4} + {10} + {15} \times  4 = {25070}$ 个时钟周期。完成 1000 个字符传送所需的时间约为 ${1000} \times  {25070} = {25070000}$ 个时钟周期。 CPU 用于该任务的时间约为 ${1000} \times  ( {{10} + {20} \times  4})  = 9 \times  {10}^{4}$ 个时钟周期。

在[[中断响应]]阶段, CPU 主要进行以下操作: 关中断、保护断点和程序状态、识别中断源。