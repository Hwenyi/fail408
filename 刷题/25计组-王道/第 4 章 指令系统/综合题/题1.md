---
publish: true
tags: []
aliases: 
finished: true
title: 题1
created: 2024-11-09 16:48
updated: 2024-11-12 05:42
---
## 题1
### 题目
【2017 统考真题】在按字节编址的计算机 `M` 上, `f1` 的部分源程序 (阴影部分) 如下。将 `f1` 中的
```cpp
int f1(unsigned n){
    int sum = 1; power = 1;
    for(unsigned i = 0; i <= n - 1; i++){
        power *= 2;
        sum += power;
    }
    return sum;
}
```
对应的机器级代码 (包括指令的虚拟地址) 如下:
![](https://img.hwenyi.tech/202411101656057.webp)
其中, 机器级代码行包括行号、虚拟地址、机器指令和汇编指令。
1. 计算机 M 是 RISC 还是 CISC? 为什么?
2. `f1` 的机器指令代码共占多少字节?要求给出计算过程。
3. 第 20 条指令 cmp 通过 `i` 减 `n - 1` 实现对 `i` 和 `n - 1` 的比较。执行 `f1(0)` 的过程中,当 `i = 0` 时,cmp 指令执行后, 进位/借位标志 CF 的内容是什么?要求给出计算过程。
4. 第 23 条指令 sh1 通过左移操作实现了 `power*2` 运算, 在 `f2` 中能否用 sh1 指令实现 `power*2`? 为什么?
### 分析
![](https://img.hwenyi.tech/202411121341179.webp)
### 解
[[刷题/408历年真题解析/2017年408真题计算机组成原理篇/题44]]
1. $M$ 为 [[CISC]]。$M$ 的指令长短不一，不符合 [[RISC]] 指令系统的特点。
2. $f1$ 的机器代码占 $96B$。因为 $f1$ 的第一条指令 “push ebp” 所在的虚拟地址为 $00401020H$，最后一条指令 “ret” 所在的虚拟地址为 $0040107FH$，所以 $f1$ 的机器指令代码长度为 $0040107FH - 00401020H + 1 = 60H = 96B$。
3. $CF = 1$。cmp 指令实现 $i$ 与 $n - 1$ 的比较功能，进行的是减法运算。在执行 $fl(0)$ 的过程中，$n = 0$，当 $i = 0$ 时，$i = 00000000H$，并且 $n - 1 = FFFFFFFF$H。因此，执行第 20 条指令时，在补码加/减运算器中执行 “0 减 FFFFFFFF$H$” 操作，即 $00000000H + 00000000H + 1 = 00000001H$，此时进位输出 $C_{out} = 0$，低位进位 $Sub = 1$，$CF = C_{out} \oplus Sub = 0 \oplus 1 = 1$。
4. $f2$ 中不能用 shl 指令实现 power * 2。因为 shl 指令把一个整数的所有有效数位整体左移，而 $f2$ 中的变量 power 是 float 型，其机器数中不包含最高有效数位，但包含了阶码部分，将其作为一个整体左移时并不能实现 “乘以 2” 的功能，因此 $f2$ 中不能用 shl 指令实现 power * 2。浮点数运算比整型运算要复杂，耗时也较长。
