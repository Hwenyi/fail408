---
publish: true
tags: []
aliases: 
finished: true
title: 题7
created: "2024-11-17 09:49"
updated: "2024-12-03 06:09"
---
## 题7
### 题目
【2009】请求分页管理系统中，假设某进程的页表内容见下表。

$$\begin{array}{|c|}\hline \text{页号}&\text{页框（Page Frame）号}&\text{有效位（存在位）}\\\hline 0&\text{101H}&1\\ 1&&0\\ 2&\text{254H}&1\\\hline \end{array}$$

页面大小为 4KB，一次内存的访问时间为 100ns，一次快表（TLB）的访问时间为 10ns，处理一次缺页的平均时间为 $10^8$ ns（已含更新 TLB 和页表的时间），进程的驻留集大小固定为 2，采用最近最少使用置换算法（LRU）和局部淘汰策略。

假设①TLB 初始为空；
②地址转换时先访问 TLB，若 TLB 未命中，再访问页表（忽略访问页表之后的 TLB 更新时间）；
③有效位为 0 表示页面不在内存中，产生缺页中断，缺页中断处理后，返回到产生缺页中断的指令处重新执行。

设有虚地址访问序列 2362H、1565H、25A5H，请问：

(1) 依次访问上述三个虚地址，各需多少时间？给出计算过程。

(2) 基于上述访问序列，虚地址 1565H 的物理地址是多少？请说明理由。
### 分析
牢记[[页表]]也是放在内存里面的，[[TLB]]初始为空的时候，也就是tlb中没有记录任何页表项，没有形成虚拟地址和物理地址的映射，这个映射关系需要我们去[[内存]]找；第一次访存是获得了这个钥匙🔑，然后我们再通过这个钥匙，再第二次访存获得数据
如何理解：“[[TLB]] [[不命中]]，所以要去访问[[页表]]，由于页表在[[内存]]中，也就是需要访问内存”，tlb存在的目的是，直接达成[[虚拟地址]]页 和 物理地址的转换，如果没有这种转换，这个题目这里就是**物理地址对应的页框号**是缺失的，还要去内存中看具体的页表项，再看有效位。
~~⚠️注意，我个人认为，[[TLB]]中也是存储了有效位的，这里发现页框号空缺，为什么tlb不直接读有效位发现是0，然后触发[[缺页]]中断，少一步访问[[内存]]，直接去外存呢~~，这里我犯了一个错误，tlb初始为空，这里第一次访问tlb时才装入了一个页表项，也就是2H和254的对应，89现在tlb里面肯定没有[[页表]]的3条对应信息。
[[页表]]项的有效位，决定了，驻留集里面是驻留的什么页面
我对于[[TLB]]的这些疑惑，本质上是因为，没有把握住tlb最开始是空的，但是这张[[页表]]是有东西的，这是一个冷启动过程
![](https://img.hwenyi.tech/202412031404802.webp)
### 解
[[刷题/408历年真题解析/2009年408真题操作系统篇/题46]]

