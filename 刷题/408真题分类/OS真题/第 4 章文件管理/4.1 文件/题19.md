---
publish: true
tags: []
aliases: 
finished: true
title: 题19
created: 2024-11-05 07:11
updated: 2024-11-09 05:48
---
## 题19
### 题目
【2018 统考真题】某文件系统采用索引节点存放文件的属性和地址信息, 簇大小为 $4{KB}$ 。 每个文件索引节点占 ${64}\;B$ ,有 11 个地址项,其中直接地址项 8 个,一级、二级和三级间接地址项各 1 个, 每个地址项长度为 $4\;B$ 。请回答下列问题:
1. 该文件系统能支持的最大文件长度是多少? (给出计算表达式即可)
2. 文件系统用 $1M$ （ $1M = {2}^{20}$ ）个簇存放文件索引节点，用 ${512}M$ 个簇存放文件数据。 若一个图像文件的大小为 ${5600}\;B$ ,则该文件系统最多能存放多少个这样的图像文件?
3. 若文件 $F1$ 的大小为 $6{KB}$ ,文件 $F2$ 的大小为 ${40}{KB}$ ,则该文系统获取 $F1$ 和 $F2$ 最后一个簇的簇号需要的时间是否相同? 为什么?
### 分析
[[刷题/25OS-王道/第 4 章 文件管理/综合题/题10]]
### 解
(1)题目告诉我们簇大小 4KB，每个地址项长度 4B，因此一个簇可存放 4KB/4B=1024 个地址项。
文件索引节点共可存放
```cpp
8 + 1*1024 + 1*1024^2 + 1*1024^3
```
个地址项，该文件系统支持的最大
文件长度是 `(8 + 1*1024 + 1*1024^2 + 1*1024^3) * 4`KB=32KB+4MB+4GB+4TB。
(2) 一个簇占 4KB，可存放 4KB/64B=64 个索引节点，1M 个簇可存放 1M * 64=64M 个索引节点，
即对应 64M 个图像文件。由于两个文件不能放入同一个簇，4KB<5600B<4KB * 2, 因此 5600B 的图像文件占用 2 个簇。512M 个簇可存放 512M/2=256M 个文件。`所以文件系统最多能存效的图像文件数为: min{(64M，256M)} = 64M。` 
(3) 两者所需的时间不同，理由如下、 文件 F1 的大小: 6KB: 直接地址项占用的空间: 4KB * 8=32KB;
文件 F1 所占的空间小于直接地址项所占的空间，因此获取 F1 的最后一个簇号只要访问索引结点的直接地址项。
文件 F2 的大小为 40KB，大于直接地址项占用的空间；但一级间接地址项占用的空间：4KB * 4KB/4B>32KB，因此获 取F2 的最后一个簇号还需要访问一级间址。
所以两者所需的时间不相同。